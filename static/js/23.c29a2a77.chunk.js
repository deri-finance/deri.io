(this["webpackJsonpderi-client"]=this["webpackJsonpderi-client"]||[]).push([[23],{112:function(e,t,r){"use strict";r.r(t);var n=r(1503);r.d(t,"formatBytes32String",(function(){return n.a})),r.d(t,"parseBytes32String",(function(){return n.b}));var a=r(1505);r.d(t,"nameprep",(function(){return a.a}));var c=r(84);r.d(t,"_toEscapedUtf8String",(function(){return c.d})),r.d(t,"toUtf8Bytes",(function(){return c.f})),r.d(t,"toUtf8CodePoints",(function(){return c.g})),r.d(t,"toUtf8String",(function(){return c.h})),r.d(t,"Utf8ErrorFuncs",(function(){return c.b})),r.d(t,"Utf8ErrorReason",(function(){return c.c})),r.d(t,"UnicodeNormalizationForm",(function(){return c.a}))},1812:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.formatBytes32String=t.Utf8ErrorFuncs=t.toUtf8String=t.toUtf8CodePoints=t.toUtf8Bytes=t._toEscapedUtf8String=t.nameprep=t.hexDataSlice=t.hexDataLength=t.hexZeroPad=t.hexValue=t.hexStripZeros=t.hexConcat=t.isHexString=t.hexlify=t.base64=t.base58=t.TransactionDescription=t.LogDescription=t.Interface=t.SigningKey=t.HDNode=t.defaultPath=t.isBytesLike=t.isBytes=t.zeroPad=t.stripZeros=t.concat=t.arrayify=t.shallowCopy=t.resolveProperties=t.getStatic=t.defineReadOnly=t.deepCopy=t.checkProperties=t.poll=t.fetchJson=t._fetchData=t.RLP=t.Logger=t.checkResultErrors=t.FormatTypes=t.ParamType=t.FunctionFragment=t.EventFragment=t.ErrorFragment=t.ConstructorFragment=t.Fragment=t.defaultAbiCoder=t.AbiCoder=void 0,t.Indexed=t.Utf8ErrorReason=t.UnicodeNormalizationForm=t.SupportedAlgorithm=t.mnemonicToSeed=t.isValidMnemonic=t.entropyToMnemonic=t.mnemonicToEntropy=t.getAccountPath=t.verifyTypedData=t.verifyMessage=t.recoverPublicKey=t.computePublicKey=t.recoverAddress=t.computeAddress=t.getJsonWalletAddress=t.TransactionTypes=t.serializeTransaction=t.parseTransaction=t.accessListify=t.joinSignature=t.splitSignature=t.soliditySha256=t.solidityKeccak256=t.solidityPack=t.shuffled=t.randomBytes=t.sha512=t.sha256=t.ripemd160=t.keccak256=t.computeHmac=t.commify=t.parseUnits=t.formatUnits=t.parseEther=t.formatEther=t.isAddress=t.getCreate2Address=t.getContractAddress=t.getIcapAddress=t.getAddress=t._TypedDataEncoder=t.id=t.isValidName=t.namehash=t.hashMessage=t.dnsEncode=t.parseBytes32String=void 0;var i=r(583);Object.defineProperty(t,"AbiCoder",{enumerable:!0,get:function(){return i.AbiCoder}}),Object.defineProperty(t,"checkResultErrors",{enumerable:!0,get:function(){return i.checkResultErrors}}),Object.defineProperty(t,"ConstructorFragment",{enumerable:!0,get:function(){return i.ConstructorFragment}}),Object.defineProperty(t,"defaultAbiCoder",{enumerable:!0,get:function(){return i.defaultAbiCoder}}),Object.defineProperty(t,"ErrorFragment",{enumerable:!0,get:function(){return i.ErrorFragment}}),Object.defineProperty(t,"EventFragment",{enumerable:!0,get:function(){return i.EventFragment}}),Object.defineProperty(t,"FormatTypes",{enumerable:!0,get:function(){return i.FormatTypes}}),Object.defineProperty(t,"Fragment",{enumerable:!0,get:function(){return i.Fragment}}),Object.defineProperty(t,"FunctionFragment",{enumerable:!0,get:function(){return i.FunctionFragment}}),Object.defineProperty(t,"Indexed",{enumerable:!0,get:function(){return i.Indexed}}),Object.defineProperty(t,"Interface",{enumerable:!0,get:function(){return i.Interface}}),Object.defineProperty(t,"LogDescription",{enumerable:!0,get:function(){return i.LogDescription}}),Object.defineProperty(t,"ParamType",{enumerable:!0,get:function(){return i.ParamType}}),Object.defineProperty(t,"TransactionDescription",{enumerable:!0,get:function(){return i.TransactionDescription}});var o=r(52);Object.defineProperty(t,"getAddress",{enumerable:!0,get:function(){return o.getAddress}}),Object.defineProperty(t,"getCreate2Address",{enumerable:!0,get:function(){return o.getCreate2Address}}),Object.defineProperty(t,"getContractAddress",{enumerable:!0,get:function(){return o.getContractAddress}}),Object.defineProperty(t,"getIcapAddress",{enumerable:!0,get:function(){return o.getIcapAddress}}),Object.defineProperty(t,"isAddress",{enumerable:!0,get:function(){return o.isAddress}});var s=c(r(231));t.base64=s;var d=r(163);Object.defineProperty(t,"base58",{enumerable:!0,get:function(){return d.Base58}});var u=r(9);Object.defineProperty(t,"arrayify",{enumerable:!0,get:function(){return u.arrayify}}),Object.defineProperty(t,"concat",{enumerable:!0,get:function(){return u.concat}}),Object.defineProperty(t,"hexConcat",{enumerable:!0,get:function(){return u.hexConcat}}),Object.defineProperty(t,"hexDataSlice",{enumerable:!0,get:function(){return u.hexDataSlice}}),Object.defineProperty(t,"hexDataLength",{enumerable:!0,get:function(){return u.hexDataLength}}),Object.defineProperty(t,"hexlify",{enumerable:!0,get:function(){return u.hexlify}}),Object.defineProperty(t,"hexStripZeros",{enumerable:!0,get:function(){return u.hexStripZeros}}),Object.defineProperty(t,"hexValue",{enumerable:!0,get:function(){return u.hexValue}}),Object.defineProperty(t,"hexZeroPad",{enumerable:!0,get:function(){return u.hexZeroPad}}),Object.defineProperty(t,"isBytes",{enumerable:!0,get:function(){return u.isBytes}}),Object.defineProperty(t,"isBytesLike",{enumerable:!0,get:function(){return u.isBytesLike}}),Object.defineProperty(t,"isHexString",{enumerable:!0,get:function(){return u.isHexString}}),Object.defineProperty(t,"joinSignature",{enumerable:!0,get:function(){return u.joinSignature}}),Object.defineProperty(t,"zeroPad",{enumerable:!0,get:function(){return u.zeroPad}}),Object.defineProperty(t,"splitSignature",{enumerable:!0,get:function(){return u.splitSignature}}),Object.defineProperty(t,"stripZeros",{enumerable:!0,get:function(){return u.stripZeros}});var l=r(230);Object.defineProperty(t,"_TypedDataEncoder",{enumerable:!0,get:function(){return l._TypedDataEncoder}}),Object.defineProperty(t,"dnsEncode",{enumerable:!0,get:function(){return l.dnsEncode}}),Object.defineProperty(t,"hashMessage",{enumerable:!0,get:function(){return l.hashMessage}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return l.id}}),Object.defineProperty(t,"isValidName",{enumerable:!0,get:function(){return l.isValidName}}),Object.defineProperty(t,"namehash",{enumerable:!0,get:function(){return l.namehash}});var b=r(82);Object.defineProperty(t,"defaultPath",{enumerable:!0,get:function(){return b.defaultPath}}),Object.defineProperty(t,"entropyToMnemonic",{enumerable:!0,get:function(){return b.entropyToMnemonic}}),Object.defineProperty(t,"getAccountPath",{enumerable:!0,get:function(){return b.getAccountPath}}),Object.defineProperty(t,"HDNode",{enumerable:!0,get:function(){return b.HDNode}}),Object.defineProperty(t,"isValidMnemonic",{enumerable:!0,get:function(){return b.isValidMnemonic}}),Object.defineProperty(t,"mnemonicToEntropy",{enumerable:!0,get:function(){return b.mnemonicToEntropy}}),Object.defineProperty(t,"mnemonicToSeed",{enumerable:!0,get:function(){return b.mnemonicToSeed}});var f=r(284);Object.defineProperty(t,"getJsonWalletAddress",{enumerable:!0,get:function(){return f.getJsonWalletAddress}});var j=r(55);Object.defineProperty(t,"keccak256",{enumerable:!0,get:function(){return j.keccak256}});var m=r(15);Object.defineProperty(t,"Logger",{enumerable:!0,get:function(){return m.Logger}});var p=r(227);Object.defineProperty(t,"computeHmac",{enumerable:!0,get:function(){return p.computeHmac}}),Object.defineProperty(t,"ripemd160",{enumerable:!0,get:function(){return p.ripemd160}}),Object.defineProperty(t,"sha256",{enumerable:!0,get:function(){return p.sha256}}),Object.defineProperty(t,"sha512",{enumerable:!0,get:function(){return p.sha512}});var x=r(262);Object.defineProperty(t,"solidityKeccak256",{enumerable:!0,get:function(){return x.keccak256}}),Object.defineProperty(t,"solidityPack",{enumerable:!0,get:function(){return x.pack}}),Object.defineProperty(t,"soliditySha256",{enumerable:!0,get:function(){return x.sha256}});var O=r(307);Object.defineProperty(t,"randomBytes",{enumerable:!0,get:function(){return O.randomBytes}}),Object.defineProperty(t,"shuffled",{enumerable:!0,get:function(){return O.shuffled}});var h=r(14);Object.defineProperty(t,"checkProperties",{enumerable:!0,get:function(){return h.checkProperties}}),Object.defineProperty(t,"deepCopy",{enumerable:!0,get:function(){return h.deepCopy}}),Object.defineProperty(t,"defineReadOnly",{enumerable:!0,get:function(){return h.defineReadOnly}}),Object.defineProperty(t,"getStatic",{enumerable:!0,get:function(){return h.getStatic}}),Object.defineProperty(t,"resolveProperties",{enumerable:!0,get:function(){return h.resolveProperties}}),Object.defineProperty(t,"shallowCopy",{enumerable:!0,get:function(){return h.shallowCopy}});var g=c(r(117));t.RLP=g;var y=r(105);Object.defineProperty(t,"computePublicKey",{enumerable:!0,get:function(){return y.computePublicKey}}),Object.defineProperty(t,"recoverPublicKey",{enumerable:!0,get:function(){return y.recoverPublicKey}}),Object.defineProperty(t,"SigningKey",{enumerable:!0,get:function(){return y.SigningKey}});var v=r(112);Object.defineProperty(t,"formatBytes32String",{enumerable:!0,get:function(){return v.formatBytes32String}}),Object.defineProperty(t,"nameprep",{enumerable:!0,get:function(){return v.nameprep}}),Object.defineProperty(t,"parseBytes32String",{enumerable:!0,get:function(){return v.parseBytes32String}}),Object.defineProperty(t,"_toEscapedUtf8String",{enumerable:!0,get:function(){return v._toEscapedUtf8String}}),Object.defineProperty(t,"toUtf8Bytes",{enumerable:!0,get:function(){return v.toUtf8Bytes}}),Object.defineProperty(t,"toUtf8CodePoints",{enumerable:!0,get:function(){return v.toUtf8CodePoints}}),Object.defineProperty(t,"toUtf8String",{enumerable:!0,get:function(){return v.toUtf8String}}),Object.defineProperty(t,"Utf8ErrorFuncs",{enumerable:!0,get:function(){return v.Utf8ErrorFuncs}});var k=r(73);Object.defineProperty(t,"accessListify",{enumerable:!0,get:function(){return k.accessListify}}),Object.defineProperty(t,"computeAddress",{enumerable:!0,get:function(){return k.computeAddress}}),Object.defineProperty(t,"parseTransaction",{enumerable:!0,get:function(){return k.parse}}),Object.defineProperty(t,"recoverAddress",{enumerable:!0,get:function(){return k.recoverAddress}}),Object.defineProperty(t,"serializeTransaction",{enumerable:!0,get:function(){return k.serialize}}),Object.defineProperty(t,"TransactionTypes",{enumerable:!0,get:function(){return k.TransactionTypes}});var P=r(198);Object.defineProperty(t,"commify",{enumerable:!0,get:function(){return P.commify}}),Object.defineProperty(t,"formatEther",{enumerable:!0,get:function(){return P.formatEther}}),Object.defineProperty(t,"parseEther",{enumerable:!0,get:function(){return P.parseEther}}),Object.defineProperty(t,"formatUnits",{enumerable:!0,get:function(){return P.formatUnits}}),Object.defineProperty(t,"parseUnits",{enumerable:!0,get:function(){return P.parseUnits}});var N=r(233);Object.defineProperty(t,"verifyMessage",{enumerable:!0,get:function(){return N.verifyMessage}}),Object.defineProperty(t,"verifyTypedData",{enumerable:!0,get:function(){return N.verifyTypedData}});var S=r(85);Object.defineProperty(t,"_fetchData",{enumerable:!0,get:function(){return S._fetchData}}),Object.defineProperty(t,"fetchJson",{enumerable:!0,get:function(){return S.fetchJson}}),Object.defineProperty(t,"poll",{enumerable:!0,get:function(){return S.poll}});var C=r(227);Object.defineProperty(t,"SupportedAlgorithm",{enumerable:!0,get:function(){return C.SupportedAlgorithm}});var E=r(112);Object.defineProperty(t,"UnicodeNormalizationForm",{enumerable:!0,get:function(){return E.UnicodeNormalizationForm}}),Object.defineProperty(t,"Utf8ErrorReason",{enumerable:!0,get:function(){return E.Utf8ErrorReason}})},227:function(e,t,r){"use strict";r.r(t);var n=r(254);r.d(t,"computeHmac",(function(){return n.a})),r.d(t,"ripemd160",(function(){return n.b})),r.d(t,"sha256",(function(){return n.c})),r.d(t,"sha512",(function(){return n.d}));var a=r(393);r.d(t,"SupportedAlgorithm",(function(){return a.a}))},230:function(e,t,r){"use strict";r.r(t);var n=r(194);r.d(t,"id",(function(){return n.a}));var a=r(225);r.d(t,"dnsEncode",(function(){return a.a})),r.d(t,"namehash",(function(){return a.d})),r.d(t,"isValidName",(function(){return a.c}));var c=r(1502);r.d(t,"messagePrefix",(function(){return c.b})),r.d(t,"hashMessage",(function(){return c.a})),r.d(t,"ensNormalize",(function(){return a.b}));var i=r(395);r.d(t,"_TypedDataEncoder",(function(){return i.a}))},2449:function(e,t,r){},2450:function(e,t,r){},2661:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r(10),c=r(0),i=r.n(c),o=r(8),s=r(62),d=r(33),u=(r(2449),r(16)),l=r(22),b=r(244),f=r(32),j=r(97),m=r.n(j),p=r(574),x=r(91),O=r.n(x),h=(r(143),r(1812)),g=(r(2450),r(177)),y=r(68),v=r(3);function k(e){var t=e.closeRegisterModal,r=e.contract,c=e.registerAfter,s=Object(o.useState)(""),l=Object(a.a)(s,2),b=l[0],f=l[1],j=Object(o.useState)(""),m=Object(a.a)(j,2),p=m[0],x=m[1],O=Object(o.useState)(""),k=Object(a.a)(O,2),P=k[0],N=k[1],S=Object(o.useState)(""),C=Object(a.a)(S,2),E=C[0],F=C[1],T=Object(o.useState)(!1),w=Object(a.a)(T,2),U=w[0],R=w[1],A=Object(o.useState)(!0),D=Object(a.a)(A,2),B=D[0],_=D[1],M=Object(o.useState)(!0),I=Object(a.a)(M,2),L=I[0],z=I[1],H=Object(o.useState)(!0),Z=Object(a.a)(H,2),K=Z[0],V=Z[1],J=Object(o.useState)(""),G=Object(a.a)(J,2),W=G[0],q=G[1],Y=Object(o.useState)(""),$=Object(a.a)(Y,2),Q=$[0],X=$[1],ee={text:"Generate Code",icon:""},te={success:"Generate Code",error:"Transaction Failed"},re=Object(o.useCallback)(Object(n.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=6;break}return e.next=3,r.recruiterAddresses(P);case 3:"0x0000000000000000000000000000000000000000"!==e.sent?(z(!0),X("")):(z(!1),X("Invalid recruiter code")),R(!1);case 6:case"end":return e.stop()}}),e)}))),[P,r]),ne=Object(o.useCallback)(Object(n.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=6;break}return e.next=3,r.brokerAddresses(E);case 3:"0x0000000000000000000000000000000000000000"===e.sent?(_(!0),q("")):(_(!1),q("Code is not available")),R(!1);case 6:case"end":return e.stop()}}),e)}))),[E,r]),ae=Object(o.useCallback)(Object(n.a)(i.a.mark((function e(){var n,a,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p||!B){e.next=21;break}return n=b||"DERI",e.prev=2,e.next=5,r.registerBroker(p,n);case 5:a=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",!1);case 11:if(!a||!a.hash){e.next=15;break}y.a.emit(u.q,{title:ee,content:te,hash:a.hash}),e.next=16;break;case 15:return e.abrupt("return",!1);case 16:return e.next=18,a.wait();case 18:o=e.sent,console.log("receipt",o),o&&(console.log("receipt",o),o&&o.transactionHash&&(s=o.transactionHash,o.status?(c(),t(),y.a.emit(u.r,{title:ee,content:te,context:{success:!0,hash:s,error:"error"}})):y.a.emit(u.r,{title:ee,content:te,context:{success:(!1).success,hash:s,error:"error"}})));case 21:case"end":return e.stop()}}),e,null,[[2,8]])}))),[b,p,r]);return Object(o.useEffect)((function(){E&&(R(!0),ne())}),[E]),Object(o.useEffect)((function(){P&&(R(!0),re())}),[P]),Object(o.useEffect)((function(){V(!(B&&!U&&p&&L))}),[B,U,p,b]),Object(v.jsxs)("div",{className:"register-modal-box",children:[Object(v.jsxs)("div",{className:"register-modal-header",children:["Generate Code",Object(v.jsx)(d.a,{token:"close-modal-icon",onClick:function(){return t()}})]}),Object(v.jsxs)("div",{className:"register-modal-info",children:[Object(v.jsx)("div",{children:Object(v.jsx)("input",{placeholder:"Enter a code",value:p,onChange:function(e){var t=e.target.value;if(t){var r=/^[a-zA-Z]+$/.test(t);if(console.log(r),!r)return!1;var n=Object(h.toUtf8Bytes)(t),a=Object(h.keccak256)(n);F(a)}console.log(t),x(t)}})}),Object(v.jsx)("div",{className:"register-title",children:"Broker Recruiter Code (Required)"}),Object(v.jsx)("div",{children:Object(v.jsx)("input",{placeholder:"DERI",value:b,onChange:function(e){var t=e.target.value;if(console.log(t),t){var r=/^[a-zA-Z0-9_]+$/.test(t);if(console.log(r),!r)return!1;var n=Object(h.toUtf8Bytes)(t),a=Object(h.keccak256)(n);N(a)}else X("");f(t)}})}),Object(v.jsxs)("div",{className:"confirm-btn",children:[Object(v.jsxs)("div",{className:"noLegitimateText",children:[W||Q?Object(v.jsx)(d.a,{token:"code-error"}):null,"  ",W||Q]}),Object(v.jsx)(g.a,{width:"100%",disabled:K,height:48,fontSize:16,label:U?"Checking...":"CONFIRM",onClick:ae})]})]})]})}var P=r(197),N=r(407),S=r(264),C=r(308);t.default=Object(s.b)("wallet","intl")(Object(s.c)((function(e){var t=e.wallet,r=e.intl,c=Object(P.a)(r.dict,"header"),s=Object(o.useState)("broker"),j=Object(a.a)(s,2),x=j[0],h=j[1],g=Object(o.useState)({}),E=Object(a.a)(g,2),F=E[0],T=E[1],w=Object(o.useState)(""),U=Object(a.a)(w,2),R=U[0],A=U[1],D=Object(o.useState)({}),B=Object(a.a)(D,2),_=B[0],M=B[1],I=Object(o.useState)(0),L=Object(a.a)(I,2),z=L[0],H=L[1],Z=Object(o.useState)(0),K=Object(a.a)(Z,2),V=K[0],J=K[1],G=Object(o.useState)(!1),W=Object(a.a)(G,2),q=W[0],Y=W[1],$=Object(o.useState)(""),Q=Object(a.a)($,2),X=Q[0],ee=Q[1],te=Object(o.useState)(""),re=Object(a.a)(te,2),ne=re[0],ae=re[1],ce=Object(o.useState)(""),ie=Object(a.a)(ce,2),oe=ie[0],se=ie[1],de=Object(o.useState)(!1),ue=Object(a.a)(de,2),le=ue[0],be=ue[1],fe=Object(C.a)("root",{preventScroll:!0,closeOnOverlayClick:!1}),je=Object(a.a)(fe,3),me=je[0],pe=je[1],xe=je[2],Oe=Object(o.useRef)(),he={56:"0x9A4f119904C6926EFE76F64BB70E35198a4dFF5f",42161:"0x772Fc767b6ff9841175922dE11DCaF9365091d2C"},ge={56:56,42161:42161},ye=ge[t.detail.chainId]?ge[t.detail.chainId]:42161,ve=he[t.detail.chainId]?he[t.detail.chainId]:he[42161],ke=Object(b.a)("RebateImplementation",ye,ve),Pe=42161===ye?"USDC":"BUSD",Ne={text:"Claim Reward",icon:Pe},Se={success:"Claim Reward",error:"Transaction Failed"},Ce=Object(o.useCallback)((function(e){var t="broker"===x?"https://deri.io/#/trade/futures?ref=".concat(e,"?chainId=").concat(ye):e;console.log("onCopy",navigator),navigator.clipboard.writeText(t),Y(!0),setTimeout((function(){return Y(!1)}),5e3)}),[x]),Ee=Object(o.useCallback)(Object(n.a)(i.a.mark((function e(){var t,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(l.a)(V).gt(0)){e.next=2;break}return e.abrupt("return",!1);case 2:if(!ke){e.next=32;break}if(be(!0),e.prev=4,"broker"!==x){e.next=11;break}return e.next=8,ke.claimBrokerRebate();case 8:t=e.sent,e.next=14;break;case 11:return e.next=13,ke.claimRecruiterRebate();case 13:t=e.sent;case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(4),be(!1),e.abrupt("return",!1);case 20:if(!t||!t.hash){e.next=24;break}y.a.emit(u.q,{title:Ne,content:Se,hash:t.hash}),e.next=26;break;case 24:return be(!1),e.abrupt("return",!1);case 26:return e.next=28,t.wait();case 28:r=e.sent,console.log("receipt",r),r&&(console.log("receipt",r),r&&r.transactionHash&&(n=r.transactionHash,r.status?(Fe(),y.a.emit(u.r,{title:Ne,content:Se,context:{success:!0,hash:n,error:"error"}})):y.a.emit(u.r,{title:Ne,content:Se,context:{success:(!1).success,hash:n,error:"error"}}))),be(!1);case 32:case"end":return e.stop()}}),e,null,[[4,16]])}))),[V,x,ke]),Fe=Object(o.useCallback)(Object(n.a)(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ke||!t.detail.account){e.next=12;break}if("broker"!==x){e.next=8;break}return e.next=4,ke.brokerClaimed(t.detail.account);case 4:(r=e.sent)&&(r=f.a.from(r._hex).toString()/Math.pow(10,18),H(r)),e.next=12;break;case 8:return e.next=10,ke.recruiterClaimed(t.detail.account);case 10:(r=e.sent)&&(r=f.a.from(r._hex).toString()/Math.pow(10,18),H(r));case 12:case"end":return e.stop()}}),e)}))),[ke,t.detail.account,x]),Te=Object(o.useCallback)(Object(n.a)(i.a.mark((function e(){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ke||!t.detail.account){e.next=11;break}if("broker"!==x){e.next=7;break}return e.next=4,ke.brokerInfos(t.detail.account);case 4:r=e.sent,e.next=10;break;case 7:return e.next=9,ke.recruiterInfos(t.detail.account);case 9:r=e.sent;case 10:r&&(n={code:r.code,id:r.id},T(n));case 11:case"end":return e.stop()}}),e)}))),[ke,t.detail.account,x,Oe.current]),we=Object(o.useCallback)(Object(n.a)(i.a.mark((function e(){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ke||!t.detail.account){e.next=11;break}if("broker"!==x){e.next=7;break}return e.next=4,ke.brokerFees(t.detail.account);case 4:r=e.sent,e.next=10;break;case 7:return e.next=9,ke.recruiterFees(t.detail.account);case 9:r=e.sent;case 10:r&&(r=f.a.from(r._hex).toString()/Math.pow(10,18),n="",r>=10&&r<1e3?n="one":r>=1e3&&r<2e3?n="two":r>=2e3&&r<4e3?n="three":r>=4e3&&r<6e3?n="four":r>=6e3&&r<1e4?n="five":r>=1e4&&(n="six"),ae(n),se(r));case 11:case"end":return e.stop()}}),e)}))),[ke,t.detail.account,x]),Ue=Object(o.useCallback)((function(){t.detail.account&&ke&&pe()}),[t.detail.account,ke,x]),Re=Object(o.useCallback)(Object(n.a)(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.detail.account){e.next=5;break}return e.next=3,m.a.get("https://referral.deri.io/referral_count",{params:{chainId:t.detail.chainId,account:t.detail.account,role:x}});case 3:(r=e.sent).data&&ee(r.data.count);case 5:case"end":return e.stop()}}),e)}))),[x,t.detail.account,t.detail.chainId]),Ae=Object(o.useCallback)(Object(n.a)(i.a.mark((function e(){var r,n,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ke||!t.detail.account){e.next=11;break}if("broker"!==x){e.next=7;break}return e.next=4,ke.getBrokerRebate(t.detail.account);case 4:r=e.sent,e.next=10;break;case 7:return e.next=9,ke.getRecruiterRebate(t.detail.account);case 9:r=e.sent;case 10:r&&(console.log("getBrokerRebate",r),n="broker"===x?r.totalBrokerRebate._hex:r.totalRecruiterRebate._hex,a="broker"===x?r.currentBrokerRate._hex:r.currentRecruiterRate._hex,c={currentRate:f.a.from(a).toString()/Math.pow(10,18),totalRebate:f.a.from(n).toString()/Math.pow(10,18)},M(c));case 11:case"end":return e.stop()}}),e)}))),[ke,t.detail.account,x]),De=Object(o.useCallback)(Object(n.a)(i.a.mark((function e(){var t,r,n,a,c,o,s,d,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ke){e.next=5;break}return e.next=3,ke.updatedTimestamp();case 3:(t=e.sent)&&(t=f.a.from(t._hex).toString()/Math.pow(10,6),t*=1e3,r=new Date(t),n=r.getUTCFullYear(),a=r.getUTCMonth()+1,c=r.getUTCDate(),o=r.getUTCHours(),s=r.getUTCMinutes(),d=r.getUTCSeconds(),a<10&&(a="0".concat(a)),c<10&&(c="0".concat(c)),o<10&&(o="0".concat(o)),s<10&&(s="0".concat(s)),d<10&&(s="0".concat(s)),u=" ".concat(a,".").concat(c,".").concat(n," ").concat(o,":").concat(s,":").concat(d),A(u));case 5:case"end":return e.stop()}}),e)}))),[ke]),Be=Object(o.useCallback)((function(){h("broker"===x?"broker_recruiter":"broker")}),[x]);return Object(o.useEffect)((function(){ke&&t.detail.account&&(Te(),Ae(),we(),Fe())}),[ke,t.detail.account,x]),Object(o.useEffect)((function(){if(_.totalRebate){var e=Object(l.a)(_.totalRebate).minus(z).toNumber();J(e)}}),[z,_]),Object(o.useEffect)((function(){ke&&De()}),[ke]),Object(o.useEffect)((function(){t.detail.account&&Re()}),[t.detail.account,t.detail.chainId,x]),Object(v.jsxs)("div",{className:"rebate-box",children:[Object(v.jsxs)("div",{className:"rebate-box-info",children:[Object(v.jsxs)("div",{className:"rebate-box-info-titile",children:[Object(v.jsx)("span",{children:"Referrals"}),Object(v.jsxs)("span",{className:"rebate-des",children:["Earn rebates through the DERI referral program.",Object(v.jsx)("br",{}),"For more information, please read the",Object(v.jsxs)("a",{href:"https://deri-protocol.medium.com/introducing-the-deri-protocol-referral-program-a9341a127c69",target:"_blank",rel:"noreferrer",children:[" "," referral program details."]})]})]}),Object(v.jsxs)("div",{className:"rebate-box-header",children:[Object(v.jsxs)("div",{className:"rebate-avatar",children:[Object(v.jsx)(d.a,{token:"rebate"}),ne?Object(v.jsx)(d.a,{token:"explained-".concat(ne),className:"explained-logo"}):null]}),Object(v.jsxs)("div",{className:"rebate-account-reward-info",children:[Object(v.jsxs)("div",{className:"rebate-reward",children:["You have ",Object(v.jsxs)("span",{className:O()("reward-btn",{"no-reward":0===V}),onClick:Ee,children:[le&&Object(v.jsx)(S.a,{}),V.toFixed(2)," ",Object(v.jsx)("span",{className:"token-icon-reward",children:Object(v.jsx)(d.a,{token:Pe})})]})," unclaimed ",Pe," reward"]}),Object(v.jsxs)("div",{className:"rebate-code",children:["Referral Code",F.code?Object(v.jsxs)("div",{className:"code-hash-copy",children:[Object(v.jsxs)("div",{className:"code-hash",children:[F.code,Object(v.jsx)(d.a,{token:"copy-code",className:O()({"copy-code-pc":q}),onClick:function(){return Ce(F.code)}}),q?Object(v.jsxs)("div",{className:"copied-box copied-m",children:[Object(v.jsx)(d.a,{token:"copied-logo"}),"Copied"]}):null]}),q?Object(v.jsxs)("div",{className:"copied-box copied-pc",children:[Object(v.jsx)(d.a,{token:"copied-logo"}),"Copied"]}):null]}):"broker"===x?Object(v.jsx)("div",{className:O()("no-code-hash",{"no-wallet":!t.isConnected()}),onClick:Ue,children:"Generate  Code"}):Object(v.jsxs)("a",{className:"no-recruiter-code-hash",target:"_blank",href:"https://forms.gle/BRWmZbzbexG9L1LJ6",rel:"noreferrer",children:[Object(v.jsx)(d.a,{token:"go-recruiter"})," Apply"]})]})]}),Object(v.jsx)("div",{className:"broker-recruiter",onClick:Be,children:Object(v.jsx)("div",{className:O()({"broker-type":"broker"===x,"recruiter-type":"broker"!==x}),children:"broker"===x?"Broker":Object(v.jsxs)(v.Fragment,{children:["Broker",Object(v.jsx)("br",{}),"Recruiter"]})})})]}),Object(v.jsxs)("div",{className:"rebate-box-use-info",children:[Object(v.jsxs)("div",{className:"rebate-box-user-info-header",children:[Object(v.jsxs)("div",{className:"rebate-box-user-info-title",children:["My Referral Stats ",Object(v.jsxs)("span",{className:"rebate-box-user-info-title-time-pc",children:["\uff08Last Updated: ",R," UTC\uff09"]}),Object(v.jsxs)("span",{className:"rebate-box-user-info-title-time-m",children:["Last Updated: ",R," UTC"]})]}),Object(v.jsx)(N.a,{lang:c,isShowWalletModal:!1})]}),Object(v.jsxs)("div",{className:"rebate-box-use-info-box",children:[Object(v.jsx)("div",{className:"total-rebate-bg",children:Object(v.jsxs)("div",{className:"total-rebate-box",children:[Object(v.jsx)(d.a,{token:"rebate-total-users"}),Object(v.jsxs)("div",{className:"total-rebate-box-info",children:[Object(v.jsx)("div",{className:"total-rebate-box-info-num",children:Object(v.jsx)(p.a,{value:X})}),Object(v.jsx)("div",{className:"total-rebate-box-info-title",children:"Total Users"})]})]})}),Object(v.jsx)("div",{className:"total-rebate-bg",children:Object(v.jsxs)("div",{className:"total-rebate-box total-fee-box",children:[Object(v.jsx)(d.a,{token:"rebate-total-fee"}),Object(v.jsxs)("div",{className:"total-rebate-box-info",children:[Object(v.jsx)("div",{className:"total-rebate-box-info-num",children:Object(v.jsx)(p.a,{value:oe,decimalScale:0===+oe?0:2})}),Object(v.jsx)("div",{className:"total-rebate-box-info-title",children:"Total Transaction Fee"})]})]})}),Object(v.jsx)("div",{className:"total-rebate-bg",children:Object(v.jsxs)("div",{className:"total-rebate-box total-rewards-box",children:[Object(v.jsx)(d.a,{token:"rebate-total-rewards"}),Object(v.jsxs)("div",{className:"total-rebate-box-info",children:[Object(v.jsx)("div",{className:"total-rebate-box-info-num",children:Object(v.jsx)(p.a,{value:_.totalRebate,decimalScale:0===+_.totalRebate?0:2})}),Object(v.jsx)("div",{className:"total-rebate-box-info-title",children:"Total Rewards"})]})]})})]})]}),Object(v.jsxs)("div",{className:"rebate-box-explained",children:[Object(v.jsxs)("div",{className:"rebate-box-explained-title",children:["Tiers Explained ",Object(v.jsx)("a",{href:"https://deri-protocol.medium.com/introducing-the-deri-protocol-referral-program-a9341a127c69",target:"_blank",rel:"noreferrer",children:Object(v.jsx)(d.a,{token:"rebate-warn"})})]}),Object(v.jsxs)("div",{className:"rebate-box-explained-list",children:[Object(v.jsxs)("div",{className:"rebate-box-explained-list-box rebate-explained-margin-box",children:[Object(v.jsx)("div",{className:"explained-box",children:Object(v.jsxs)("div",{className:"explained-box-info explained-one",children:[Object(v.jsx)("div",{className:"explained-logo",children:Object(v.jsx)(d.a,{token:"explained-one"})}),Object(v.jsxs)("div",{className:"explained-text",children:[Object(v.jsx)("div",{className:"explained-rate",children:"20% commission rate"}),Object(v.jsx)("div",{className:"explained-range-usd",children:"For transaction fee range of 10-1000 USD"})]})]})}),Object(v.jsx)("div",{className:"explained-box",children:Object(v.jsxs)("div",{className:"explained-box-info explained-two",children:[Object(v.jsx)("div",{className:"explained-logo",children:Object(v.jsx)(d.a,{token:"explained-two"})}),Object(v.jsxs)("div",{className:"explained-text",children:[Object(v.jsx)("div",{className:"explained-rate",children:"20% - 24% commission rate"}),Object(v.jsx)("div",{className:"explained-range-usd",children:"For transaction fee range of 1000-2000 USD"})]})]})})]}),Object(v.jsxs)("div",{className:"rebate-box-explained-list-box",children:[Object(v.jsx)("div",{className:"explained-box",children:Object(v.jsxs)("div",{className:"explained-box-info explained-three",children:[Object(v.jsx)("div",{className:"explained-logo",children:Object(v.jsx)(d.a,{token:"explained-three"})}),Object(v.jsxs)("div",{className:"explained-text",children:[Object(v.jsx)("div",{className:"explained-rate",children:"24% - 28% commission rate"}),Object(v.jsx)("div",{className:"explained-range-usd",children:"For transaction fee range of 2000-4000 USD"})]})]})}),Object(v.jsx)("div",{className:"explained-box",children:Object(v.jsxs)("div",{className:"explained-box-info explained-four",children:[Object(v.jsx)("div",{className:"explained-logo",children:Object(v.jsx)(d.a,{token:"explained-four"})}),Object(v.jsxs)("div",{className:"explained-text",children:[Object(v.jsx)("div",{className:"explained-rate",children:"28% - 32% commission rate"}),Object(v.jsx)("div",{className:"explained-range-usd",children:"For transaction fee range of 4000-6000 USD"})]})]})})]}),Object(v.jsxs)("div",{className:"rebate-box-explained-list-box",children:[Object(v.jsx)("div",{className:"explained-box",children:Object(v.jsxs)("div",{className:"explained-box-info explained-five",children:[Object(v.jsx)("div",{className:"explained-logo",children:Object(v.jsx)(d.a,{token:"explained-five"})}),Object(v.jsxs)("div",{className:"explained-text",children:[Object(v.jsx)("div",{className:"explained-rate",children:"32%-40% commission rate"}),Object(v.jsx)("div",{className:"explained-range-usd",children:"For transaction fee range of 6000-10000 USD"})]})]})}),Object(v.jsx)("div",{className:"explained-box",children:Object(v.jsxs)("div",{className:"explained-box-info explained-six",children:[Object(v.jsx)("div",{className:"explained-logo",children:Object(v.jsx)(d.a,{token:"explained-six"})}),Object(v.jsxs)("div",{className:"explained-text",children:[Object(v.jsx)("div",{className:"explained-rate",children:"40% commission rate"}),Object(v.jsx)("div",{className:"explained-range-usd",children:"For transaction fee range of 10000 USD and above"})]})]})})]})]})]})]}),Object(v.jsx)(d.a,{token:"copied-logo",className:"loaded-copied-logo"}),Object(v.jsx)(me,{children:Object(v.jsx)(k,{closeRegisterModal:xe,contract:ke,registerAfter:function(){Te(),Ae(),we(),Fe()}})})]})})))},307:function(e,t,r){"use strict";r.r(t);var n=r(283);r.d(t,"randomBytes",(function(){return n.a}));var a=r(1504);r.d(t,"shuffled",(function(){return a.a}))},583:function(e,t,r){"use strict";r.r(t);var n=r(103);r.d(t,"ConstructorFragment",(function(){return n.a})),r.d(t,"ErrorFragment",(function(){return n.b})),r.d(t,"EventFragment",(function(){return n.c})),r.d(t,"Fragment",(function(){return n.e})),r.d(t,"FunctionFragment",(function(){return n.f})),r.d(t,"ParamType",(function(){return n.g})),r.d(t,"FormatTypes",(function(){return n.d}));var a=r(390);r.d(t,"AbiCoder",(function(){return a.a})),r.d(t,"defaultAbiCoder",(function(){return a.b}));var c=r(1501);r.d(t,"Interface",(function(){return c.b})),r.d(t,"Indexed",(function(){return c.a}));var i=r(75);r.d(t,"checkResultErrors",(function(){return i.d})),r.d(t,"LogDescription",(function(){return c.c})),r.d(t,"TransactionDescription",(function(){return c.d}))}}]);
//# sourceMappingURL=23.c29a2a77.chunk.js.map