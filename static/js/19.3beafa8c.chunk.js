(this["webpackJsonpderi-client"]=this["webpackJsonpderi-client"]||[]).push([[19],{1256:function(e,t,a){"use strict";var n,i,c=a(23),s=a(143),r=a(49),o=a(10),l=a(60),d=a(6),u=(a(67),a(1314)),b=a(51),j=a(19),p=a(14),h=a(4),x=["allowZero","wallet","closeShowLoadingEffectAfterLoaded","defaultValue"],f=Object(b.a)(u.a)(n||(n=Object(l.a)(["\n  width : ","px;\n"])),(function(e){return e.width})),v=b.a.div(i||(i=Object(l.a)(["\n  width : ",";\n  height : ",";\n"])),(function(e){return/px$/.test(e.width)?e.width:"".concat(e.width,"px")}),(function(e){return/px$/.test(e.height)?e.height:"".concat(e.height,"px")}));t.a=function(e){var t=Object(d.useState)(Object(h.jsx)("span",{className:"loading-line"})),a=Object(o.a)(t,2),n=a[0],i=a[1],l=Object(d.useState)(!0),u=Object(o.a)(l,2),b=u[0],m=u[1],O=function(){var t=e.allowZero;return"object"!==Object(r.a)(e.value)&&void 0!==e.value&&""!==e.value&&!isNaN(e.value)&&"NaN"!==e.value||0===Math.abs(e.value)&&!0===t},g=function(e){return e&&e.replace(/\.$/,"")};return Object(d.useEffect)((function(){var t=e.allowZero,a=(e.wallet,e.closeShowLoadingEffectAfterLoaded),n=e.defaultValue,r=void 0===n?"--":n,o=Object(s.a)(e,x);if(O())o.decimalScale>0&&o.value&&/\d+\.0*[1-9]+/.test(o.value)&&0===+Object(p.bg)(o.value).toFixed(+o.decimalScale||2)&&(o.decimalScale=Object(j.d)(Math.abs(o.value))+2),(-1===o.decimalScale||0===+o.value&&t)&&delete o.decimalScale,o.value=Object(j.K)(o.value),o.value&&/\d+.9{6}/.test(o.value)&&(o.value=(+o.value).toFixed(5)),i(Object(h.jsx)(f,Object(c.a)(Object(c.a)({},o),{},{renderText:g,displayType:"text",fixedDecimalScale:!0,thousandSeparator:!0})));else if(b){var l=e.width,d=e.height;i(Object(h.jsx)(v,{className:"loading-line",width:l,height:d})),a&&m(!1)}var u=window.setTimeout((function(){O()||i(r)}),6e4);return function(){clearTimeout(u)}}),[e.value,e.decimalScale,e.suffix]),n}},1269:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var n,i=a(60),c=a(51),s=a(1368),r=a.n(s),o=a(145),l=a(19),d=a(1346),u=a(4),b=c.a.div(n||(n=Object(i.a)(["\n  display:",";\n  .text {\n    border-bottom : 1px dashed #93A1B8;\n    width : max-content;\n    cursor : pointer;\n    display:","\n  }\n  \n  .__react_component_tooltip.tooltip.show {\n    font-weight : "," \n  }\n"])),(function(e){return e.block}),(function(e){return e.block}),(function(e){return e.isWin?400:600}));function j(e){var t=e.text,a=e.id,n=void 0===a?String((new Date).getTime())+Math.random():a,i=e.tip,c=e.multiline,s=e.html,j=e.className,p=e.element,h=void 0===p?"":p,x=e.block,f=void 0===x?"block":x,v=e.width,m=void 0===v?"auto":v,O=e.children,g=e.tiggerEvent;return Object(u.jsxs)(b,{className:j,block:f,isWin:d.isWindows,children:[Object(u.jsx)("div",{className:"text","data-for":n,"data-tip":s?r.a.renderToString(h):i,"data-event":Object(l.z)()?"click":g,"data-html":s,children:t||O}),i&&Object(u.jsx)(o.a,{id:n,width:m,padding:"12",place:"bottom",overridePosition:function(e,t,a,n,i,c,s,r){var o=a.getBoundingClientRect(),l=n.getBoundingClientRect(),d=o.x,u=o.y,b=o.height,j=o.width;e.left,e.top;return d+l.width/2>document.documentElement.clientWidth?d-=Math.abs(j-l.width):d-(l.width-j)/2<0?d-=j:d-=(l.width-j)/2,u+b+l.height>=document.documentElement.clientHeight?u=u+b-l.height:u+=b,d<0&&(d=0),u<0&&(u=0),{top:u,left:d}},html:s,borderRadius:8,multiline:c})]})}},1323:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n,i=a(10),c=a(60),s=a(6),r=a(167),o=a(51),l=a(4),d=o.a.div(n||(n=Object(c.a)(["\n    display : flex;\n    width: 100%;\n    justify-content: space-between;\n  "])));function u(e){var t=e.groups,a=void 0===t?["25%","50%","75%","100%"]:t,n=e.selectedBorderColor,c=e.defaultBorderColor,o=e.onChange,u=e.defaultValue,b=e.outline,j=e.outlineColor,p=e.width,h=e.height,x=e.bgColor,f=e.className,v=e.disabled,m=e.canUnselected,O=void 0===m||m,g=Object(s.useState)(u),k=Object(i.a)(g,2),y=k[0],w=k[1];return Object(s.useEffect)((function(){w(u)}),[u]),Object(l.jsx)(d,{className:f,children:a.map((function(e,t){return Object(l.jsx)(r.a,{label:e,selectedBorderColor:n,isSelected:e===y,disabled:v,outline:b,bgColor:x,className:"g-button",defaultBorderColor:c,outlineColor:j,width:p,height:h,onClick:function(){var t;(t=e)!==y?(w(t),o&&o(t)):O&&t===y?(w(""),o&&o("")):w(t)}},t)}))})}},1369:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(6),i=a(51),c=a(14),s=a(1269),r=a(4);const o=i.a.div`
display : flex;
font-size : 14px;
align-items : center;
background: rgba(85, 119, 253, 0.1);
border-radius: 4px;
justify-content: space-between;
input {
  background: transparent;
  border-radius: 4px;
  // min-width: 240px;
  border: 0;
  width : ${e=>e.inputWidth};
  height: ${e=>e.inputHeight};
  color : #E0ECFF;
  font-size : 18px;
  padding-left: 16px;
}
input:focus {
  outline: none;
}
.unit {
  margin-right: ${e=>e.unitPadding};
}
`;function l(e){let{value:t,unit:a,unitTip:i,max:l,step:d,onChange:u,styles:b={},disableNegtive:j=!0,focus:p,placeholder:h="",unitPadding:x="24px",minTradeVolume:f,decimal:v=2,readOnly:m,inputWidth:O="50%",inputHeight:g="56px",className:k,disabled:y=!1,onBlur:w,onFocus:N}=e;const S=Object(n.useRef)(null);return Object(n.useEffect)((()=>{S.current.setCustomValidity(""),S.current&&p&&S.current.focus()}),[p]),Object(r.jsxs)(o,{unitPadding:x,inputWidth:O,inputHeight:g,className:k,style:{...b},children:[Object(r.jsx)("input",{placeholder:h,type:"number",onBlur:w,onFocus:N,disabled:y,value:t,step:d,ref:S,onChange:e=>{const t=new RegExp(`\\d+\\.\\d{0,${v}}$`),{value:a}=e.target;if(l&&Object(c.bg)(a).gt(l))u&&u(l);else if(j&&(a<0||isNaN(a)))u&&u("");else if(a)if(f>=1)if(a/f>=1)u&&u(Object(c.bg)(a).div(f).integerValue()*f);else{const e=a*f;u&&u(e)}else if(/\d+\./.test(a)&&!t.test(a)){const e=a.substring(0,a.indexOf(".")+1+v);u&&u(e)}else u&&u(a);else u&&u(a)},readOnly:m}),Object(r.jsx)("div",{className:"unit",children:i?Object(r.jsx)(s.a,{tip:i,text:a}):a})]})}},1412:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n,i=a(10),c=a(60),s=a(51),r=a(6),o=a(28),l=a(4),d=s.a.div(n||(n=Object(c.a)(["\n    cursor: pointer;\n    width:","px;\n    height:","px;\n    display:flex;\n    .tab-left.inactive{\n      border-radius:0px 0px 4px 0px;\n    }\n    .tab-right.inactive{\n      border-radius:0px 0px 0px 4px;\n    }\n    .tab-left.active{\n      border-radius:0px 4px 0px 0px;\n      ",";\n    }\n    .tab-right.active{\n      border-radius:4px 0px 0px 0px;\n      ",";\n    }\n    .inactive,.active{\n      width:50%;\n      box-sizing: content-box;\n      font-size:","px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      img{\n        margin-right:","px\n      }\n    }\n    .inactive{\n      background:",";\n      ","\n    }\n    .active {\n      color: ",";\n      background : ",";\n      ",";\n    }\n    .icon-tab{\n      margin-right:20px;\n      width:25px;\n      height:25px;\n    }\n  "])),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.borderR}),(function(e){return e.borderL}),(function(e){return e.size}),(function(e){return e.iconMarginRight}),(function(e){return e.inactiveBgColor}),(function(e){return e.borderB}),(function(e){return e.activeFontColor}),(function(e){return e.activeBgColor}),(function(e){return e.borderT}));function u(e){var t=e.tabSet,a=e.inactiveBgColor,n=e.iconMarginRight,c=e.activeBgColor,s=(e.icon,e.className),u=e.width,b=void 0===u?238:u,j=e.height,p=void 0===j?47:j,h=e.size,x=void 0===h?16:h,f=e.borderTop,v=void 0!==f&&f,m=e.borderBottom,O=void 0!==m&&m,g=e.divider,k=void 0!==g&&g,y=e.activeIndex,w=void 0===y?0:y,N=Object.keys(t),S=Object(r.useState)(N[w]),T=Object(i.a)(S,2),C=T[0],I=T[1],q=Object(r.useState)(),E=Object(i.a)(q,2),F=E[0],B=E[1],_=Object(r.useState)(),L=Object(i.a)(_,2),H=L[0],A=L[1],$=Object(r.useState)(),U=Object(i.a)($,2),D=U[0],R=U[1],P=Object(r.useState)(),z=Object(i.a)(P,2),Z=z[0],V=z[1],W=Object(r.useState)(),M=Object(i.a)(W,2),K=M[0],X=M[1],J=Object(r.useState)(),G=Object(i.a)(J,2),Q=G[0],Y=G[1];return Object(r.useEffect)((function(){var e=Object.keys(t);I(e[w])}),[t,w]),Object(r.useEffect)((function(){var e=Object.keys(t),a=C||e[w];if(t[a]){B(t[a].style);var n=v?"border-top:1px solid ".concat(t[a].borderColor):"border-top:0",i=O?"border-bottom:1px solid ".concat(t[a].borderColor):"border-bottom:0",c=k?"border-left:1px solid ".concat(t[a].borderColor):"border-left:0",s=k?"border-right:1px solid ".concat(t[a].borderColor):"border-right:0",r=t[a].fontColor?t[a].fontColor:"#FFFFFF";A(n),R(c),V(i),X(s),Y(r)}}),[t,C]),Object(l.jsxs)("div",{style:F,className:s,children:[Object(l.jsx)(d,{className:"tab-header",iconMarginRight:n,width:b,height:p,activeFontColor:Q,activeBgColor:c,inactiveBgColor:a,size:x,borderT:H,borderB:Z,borderL:D,borderR:K,children:N.map((function(e,a){return Object(l.jsxs)("div",{className:"".concat(t[e].direction||t[e].className,e===C?" active":" inactive"),onClick:function(t){return function(e,t){I(e)}(e)},children:[t[e].icon?Object(l.jsx)(o.a,{width:t[e].iconWidth,height:t[e].iconHeight,token:e===C?t[e].icon:t[e].inicon}):"","  ",e]},a)}))}),t[C]?t[C].content:""]})}},1435:function(e,t,a){"use strict";t.a=a.p+"static/media/staked.45c27f0b.svg"},1462:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n,i=a(60),c=a(51),s=(a(6),a(4)),r=c.a.div(n||(n=Object(i.a)(["\nwidth:","%;\nmax-width:100%;\nheight:10px;\nbackground-color: #5577FD;\n"])),(function(e){return e.width}));function o(e){var t=e.startTimestamp,a=e.nowTimestamp,n=e.endTimestamp,i=parseInt((a-t)/(n-t)*100);return Object(s.jsx)("div",{className:"time-slider",children:Object(s.jsx)(r,{width:i})})}},1464:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n,i=a(10),c=a(60),s=a(6),r=a(51),o=a(475),l=a(4),d=r.a.div(n||(n=Object(c.a)(["\n  .search-token{\n  width: ","px;\n  height: ","px;\n  background: ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding:0 24px;\n  border-radius:4px;\n  img{\n    width:18px;\n    height:18px;\n  }\n  .search-input{\n    border: 0;\n    width:100%;\n    height: 100%;\n    background:transparent;\n    outline-style: none;\n    color: #FFFFFF;\n    font-size: 18px;\n    border-radius: 4px;\n  }\n}\n"])),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.bgColor}));function u(e){var t=e.list,a=e.onChange,n=e.width,c=void 0===n?"320":n,r=e.height,u=void 0===r?"48":r,b=e.bgColor,j=void 0===b?"rgba(85, 119, 253, 0.1)":b,p=e.searchName,h=void 0===p?"bTokenSymbol":p,x=e.className,f=e.placeholder,v=void 0===f?"Search":f,m=(e.onFocus,e.onBlur,Object(s.useState)("")),O=Object(i.a)(m,2),g=O[0],k=O[1],y=Object(s.useState)(0),w=Object(i.a)(y,2),N=(w[0],w[1]),S=Object(s.useRef)([]);return Object(s.useEffect)((function(){if(g){var e=g.toLocaleUpperCase();0===S.current.length&&(S.current=t,N(t.length));var n=S.current.filter((function(t){return t[h]&&t[h].toUpperCase().indexOf(e)>=0}));a(n,e)}else a(S.current)}),[g]),Object(s.useEffect)((function(){0===S.current.length&&N(t.length)}),[t]),Object(l.jsx)(d,{width:c,height:u,bgColor:j,className:x,children:Object(l.jsxs)("div",{className:"search-token",children:[Object(l.jsx)("input",{type:"text",className:"search-input",placeholder:v,value:g,onChange:function(e){!function(e){var t=e.target.value;k(t)}(e)}}),Object(l.jsx)("img",{src:o.default,alt:""})]})})}},1580:function(e,t,a){"use strict";var n=a(6),i=a(167),c=a(44),s=a(126),r=a(39),o=a(14),l=a(19),d=(a(1683),a(4));function u(){return Object(d.jsx)("div",{class:"sleepContentView",children:Object(d.jsx)("div",{class:"circle"})})}var b=a(28);a(1684);t.a=Object(c.b)("wallet")(Object(c.c)((function(e){let{lang:t,subject:a,wallet:c,pool:j={},ignoreApprove:p,bTokenId:h,bToken:x,icon:f,label:v,onClick:m,isReady:O,disabled:g=!0,statusCallback:k,alert:y,...w}=e;const[N,S]=Object(n.useState)(!0),[T,C]=Object(n.useState)(v),[I,q]=Object(n.useState)(!1),[E,F]=Object(n.useState)(!1),[B,_]=Object(n.useState)(!1),[L,H]=Object(n.useState)(!1),[A,$]=Object(n.useState)(f),U=Object(n.useCallback)((async(e,t)=>{let a;if(e.detail&&t.address)if(s.a.isOpen&&await o.openConfigListCache.update(),Object(l.y)(t.address))a=await r.a.request("isLpUnlocked",[e.detail.chainId,t.address,e.detail.account]);else if(h||x){const n=[e.detail.chainId,t.address,e.detail.account,h||x];a=await r.a.request("isUnlocked",n)}return a}),[x,h]),D=Object(n.useCallback)((async()=>{if(c&&j){let e;if(s.a.isOpen&&await o.openConfigListCache.update(),Object(l.y)(j.address))e=await r.a.request("unlockLp",[c.detail.chainId,j.address,c.detail.account],{write:!0,subject:t.approve});else{let a=[c.detail.chainId,j.address,c.detail.account,h||x];e=await r.a.request("unlock",a,{write:!0,subject:Object(l.h)(t.approve.toLowerCase())})}if(e){if(e.status)y.success(`Approve ${x}`,{timeout:8e3,isTransaction:!0,transactionHash:e.transactionHash,link:`${c.blockExploreUrl}/tx/${e.transactionHash}`,title:"Approve Executed"});else{if(""===e.transactionHash)return!1;y.error(`Transaction Failed ${e.error}`,{timeout:3e5,isTransaction:!0,transactionHash:e.transactionHash,link:`${c.blockExploreUrl}/tx/${e.transactionHash}`,title:"Approve Failed"})}return e.status}}}),[j,c,h,x]);return Object(n.useEffect)((async()=>{j&&c.detail&&c.detail.account&&j.bTokens&&t&&(c.isConnected()?await U(c,j)?(q(!1),C(v),$(f),k&&k(!1)):(q(!0),$(f),k&&k(!0)):(C(t["connect-wallet"]),$(null)))}),[j,c,t,x,h]),Object(n.useEffect)((()=>{S(!g)}),[g]),Object(n.useEffect)((()=>{c&&j&&j.address&&(c.setAddress(j.address),j.isV3||j.isV3Lite?c.setBToken(x):c.setBTokenId(h))}),[c,j,h,x]),Object(d.jsxs)("div",{children:[Object(d.jsx)(i.a,{...w,disabled:!N,label:T,onClick:async e=>{if(j&&c&&c.detail){if(H(!0),c.isConnected()){if(p||await U(c,j))return $(f),m(e);{$(f);let e=await D();if(e){F(!0),await m()&&_(!0),k&&k(!1)}else H(!1),k&&k(!0);return e}}return $(null),c.connect()}},icon:A}),!p&&I&&N&&Object(d.jsxs)("div",{className:"init-approve",children:[Object(d.jsxs)("div",{className:"step-approve",children:[!L&&Object(d.jsx)("div",{className:"step-one",children:"1"}),L&&Object(d.jsx)("div",{className:"pending",children:E?Object(d.jsx)(b.a,{token:"finish"}):Object(d.jsx)(u,{})}),Object(d.jsx)("div",{className:E?"approve-text finish-text":"approve-text",children:t.approve})]}),Object(d.jsx)("div",{className:E?"step-hr finish":"step-hr"}),Object(d.jsxs)("div",{className:"step-transaction",children:[!E&&Object(d.jsx)("div",{className:"step-two",children:"2"}),L&&E&&Object(d.jsx)("div",{className:"pending",children:B?Object(d.jsx)(b.a,{token:"finish"}):Object(d.jsx)(u,{})}),Object(d.jsx)("div",{className:B?"transaction-text finish-text":"transaction-text",children:T})]})]})]})})))},1671:function(e,t,a){},1680:function(e,t,a){"use strict";a(56),a(19),a(1595),a(1577),a(1682),a(131),a(4)},1682:function(e,t,a){},1683:function(e,t,a){},1684:function(e,t,a){},1685:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(6),i=(a(39),a(51)),c=a(28),s=a(1269),r=a(1256),o=a(4);const l=i.a.div`
  .remove-hint{
    cursor: pointer;
    .text{
      display: flex;
      border:0;
    }
    span{
      margin-left:8px;
    }
  }
`;function d(e){let{lang:t,wallet:a,baseToken:i,penalty:d,isB0Staked:u,availableBalance:b,getLang:j}=e;const[p,h]=Object(n.useState)(""),[x,f]=Object(n.useState)("BUSD");return Object(n.useEffect)((()=>{let e,n=56===+a.detail.chainId||97===+a.detail.chainId?"BUSD":"USDC";f(n);let c={num:i,name:n},s={name:n};e=u?"BUSD"===i||"USDC"===i?`${t["your-account-has-an-unsettled-balance-of"]} ${d} ${n} ${j("this-action-will-update-your",s)}`:`${t["your-account-has-an-unsettled-balance-of"]} ${d} ${n} ${j("this-action-will-trigger-swapping-to-update-your",c)}`:`${t["your-account-has-an-unsettled-balance-of"]} ${d} ${n} ${j("this-action-will-trigger-swapping-to-update-your-busd-balance-to-reflect-the-unsettled-amount",c)}`,h(e)}),[u,d,i]),Object(o.jsx)(l,{children:+d<0&&+b>0&&Object(o.jsx)("div",{className:"remove-hint",children:Object(o.jsxs)(s.a,{tip:p,width:"332",children:[Object(o.jsx)(c.a,{token:"warn"})," ",Object(o.jsxs)("span",{children:[t["negative-unsettled-balance"]," : ",Object(o.jsx)(r.a,{value:d,decimalScale:2})," ",x]})]})})})}},2105:function(e,t,a){},2106:function(e,t,a){},2388:function(e,t,a){"use strict";a.r(t);var n=a(124),i=a(2),c=a(10),s=a(0),r=a.n(s),o=a(6),l=a(56),d=a(44),u=a(168),b=a(1369),j=a(1580),p=a(1323),h=a(19),x=a(1256),f=a(15),v=a(39),m=(a(2105),a(14)),O=a(486),g=a(1685),k=a(4);function y(e){var t=e.getLang,a=e.wallet,n=e.lang,s=e.type,l=e.isLp,d=e.chainId,y=e.bTokenId,w=e.poolConfig,N=e.version,S=e.baseToken,T=e.address,C=e.walletBalance,I=e.poolInfo,q=e.afterTransaction,E=Object(o.useState)(""),F=Object(c.a)(E,2),B=F[0],_=F[1],L=Object(o.useState)(!1),H=Object(c.a)(L,2),A=H[0],$=H[1],U=Object(o.useState)(""),D=Object(c.a)(U,2),R=D[0],P=D[1],z=Object(o.useState)(!1),Z=Object(c.a)(z,2),V=Z[0],W=Z[1],M=Object(o.useState)(""),K=Object(c.a)(M,2),X=K[0],J=K[1],G=Object(o.useState)(!1),Q=Object(c.a)(G,2),Y=Q[0],ee=Q[1],te=Object(o.useState)(!1),ae=Object(c.a)(te,2),ne=ae[0],ie=ae[1],ce=Object(u.c)(),se=Object(o.useState)({}),re=Object(c.a)(se,2),oe=re[0],le=re[1],de="add"===s||"v2"===N||"v3"===N||"v3_lite"===N?S:n.shares,ue=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=6;break}return e.next=3,v.a.request("getEstimatedLpInfo",[a.detail.chainId,T,a.detail.account,S]);case 3:t=e.sent,J(t.b0Penalty),ee(t.isB0Staked);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S===(56===+d||97===+d?"BUSD":"USDC")||!S){e.next=8;break}return e.next=4,v.a.request("getPoolB0Info",[d,T]);case 4:t=e.sent,ie(t.insufficientB0),e.next=9;break;case 8:ie(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=Object(i.a)(r.a.mark((function e(){var t,n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="add"===s?B:Object(m.bg)(B).times(Object(m.bg)(-1)).toString(),n="v3"===N||"v3_lite"===N?[a.detail.chainId,T,a.detail.account,t,S]:[a.detail.chainId,T,a.detail.account,t,y],e.next=4,v.a.request("getEstimatedLiquidityInfo",n);case 4:+(i=e.sent).percentage1<0&&(i.percentage1=0,i.shares1=0),le(i);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=Object(i.a)(r.a.mark((function e(){var i,c,s,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Object(m.bg)(C),!Object(m.bg)(B).gt(i)){e.next=5;break}return ce.error(n["not-sufficient-funds"]),e.abrupt("return",!1);case 5:if(!(B<=0||isNaN(B))){e.next=8;break}return ce.error(n["it-has-to-be-greater-than-zero"]),e.abrupt("return",!1);case 8:if("lp"!==l){e.next=15;break}return s=[a.detail.chainId,T,a.detail.account,B],e.next=12,v.a.request("addLpLiquidity",s,{includeResponse:!0,write:!0,subject:n["add-liquidity"]});case 12:c=e.sent,e.next=19;break;case 15:return o="v3"===N||"v3_lite"===N?[a.detail.chainId,T,a.detail.account,B,S]:[a.detail.chainId,T,a.detail.account,B,y],e.next=18,v.a.request("addLiquidity",o,{includeResponse:!0,write:!0,subject:n["add-liquidity"]});case 18:c=e.sent;case 19:if(q(!0),_(""),c&&c.success){e.next=28;break}if(""!==c.response.transactionHash){e.next=24;break}return e.abrupt("return",!1);case 24:return ce.error("".concat(n["transaction-failed"]," : ").concat(c.response.error),{timeout:3e5,isTransaction:!0,transactionHash:c.response.transactionHash,link:"".concat(a.blockExploreUrl,"/tx/").concat(c.response.transactionHash),title:n["add-liquidity-failed"]}),e.abrupt("return",!1);case 28:ce.success("".concat(t("add-baseToken-liquidity",{baseToken:S})),{timeout:8e3,isTransaction:!0,transactionHash:c.response.data.transactionHash,link:"".concat(a.blockExploreUrl,"/tx/").concat(c.response.data.transactionHash),title:n["add-liquidity-executed"]});case 29:return e.abrupt("return",!0);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object(i.a)(r.a.mark((function e(){var i,c,s,o,d,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Object(m.bg)(I.totalShares),c=A?I.totalShares:B,!(s=Object(m.bg)(c)).gt(i)){e.next=6;break}return ce.error("".concat(n["your-current-max-removable-shares-are"],"  ").concat(I.totalShares)),e.abrupt("return",!1);case 6:if(!(+c<=0||isNaN(B))){e.next=9;break}return ce.error(n["invalid-liquidity"]),e.abrupt("return",!1);case 9:if("lp"!==l){e.next=16;break}return d=[a.detail.chainId,T,a.detail.account,c],e.next=13,v.a.request("removeLpLiquidity",d,{includeResponse:!0,write:!0,subject:n["remove-liquidity"]});case 13:o=e.sent,e.next=20;break;case 16:return u="v3"===N||"v3_lite"===N?[a.detail.chainId,T,a.detail.account,c,S,i.eq(s)]:[a.detail.chainId,T,a.detail.account,c,y,i.eq(s)],e.next=19,v.a.request("removeLiquidity",u,{includeResponse:!0,write:!0,subject:n["remove-liquidity"]});case 19:o=e.sent;case 20:if(o&&o.success){e.next=26;break}if(""!==o.response.transactionHash){e.next=23;break}return e.abrupt("return",!1);case 23:ce.error("".concat(n["transaction-failed"]," : ").concat(o.response.error),{timeout:3e5,isTransaction:!0,transactionHash:o.response.transactionHash,link:"".concat(a.blockExploreUrl,"/tx/").concat(o.response.transactionHash),title:n["remove-liquidity-failed"]}),e.next=27;break;case 26:ce.success("".concat(t("remove-baseToken-liquidity",{baseToken:S})),{timeout:5e3,isTransaction:!0,transactionHash:o.response.data.transactionHash,link:"".concat(a.blockExploreUrl,"/tx/").concat(o.response.data.transactionHash),title:n["remove-liquidity-executed"]});case 27:return _(""),q(),e.abrupt("return",!0);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var e="add"===s?Object(m.bg)(C):Object(m.bg)(I.totalShares);/\d+\.(999999|099999|009999|000999|000099|000009)/.test(e)&&(e=Object(m.bg)((+C).toFixed(5)));var t=Object(m.bg)(B);B&&0!==+B&&!t.gt(e)?(je(),W(!1)):W(!0),ne&&W(!0)}),[B,s,I,C]),Object(o.useEffect)((function(){_(""),P("")}),[s,y,S]),Object(o.useEffect)((function(){a.isConnected()&&ue()}),[a.detail,S,T]),Object(o.useEffect)((function(){be()}),[d,T,S]),Object(k.jsxs)("div",{className:"operate-liquidity",children:[Object(k.jsx)("div",{className:"add-input",children:Object(k.jsx)(b.a,{value:B,unit:de,onChange:function(e){_(e)},inputWidth:"237px",styles:{"min-width":"332px"}})}),"add"===s&&Object(k.jsxs)("div",{className:"wallet-balance",children:[n["wallet-balance"],": ",Object(k.jsx)(x.a,{value:C,displayType:"text",decimalScale:2})," ",S]}),"remove"===s&&Object(k.jsxs)("div",{className:"wallet-balance",children:[n["staked-balance"],": ",Object(k.jsx)(x.a,{value:I.totalShares,displayType:"text",decimalScale:2})," ",de]}),"remove"===s&&Object(k.jsx)("div",{children:Object(k.jsx)(g.a,{getLang:t,lang:n,baseToken:S,wallet:a,penalty:X,isB0Staked:Y})}),Object(k.jsx)("div",{className:"check-proportion",children:Object(k.jsx)(p.a,{outline:!0,defaultValue:R,onChange:function(e){var t="add"===s?C:I.totalShares,a=Object(h.F)(e,t);P(e),_(a),P(e),$("100%"===e)},bgColor:" rgba(85, 119, 253, 0.1)",width:77,height:40})}),Object(k.jsxs)("div",{className:"information",children:[0!==+B&&("add"!==s||!ne)&&Object(k.jsxs)("div",{children:[Object(k.jsxs)("div",{className:"percentage",children:[Object(k.jsx)("div",{className:"info-box-title",children:n["my-liquidity-percentage"]}),Object(k.jsxs)("div",{className:"info-box-num",children:[Object(k.jsx)(x.a,{allowZero:!0,width:"80px",value:I.percent,decimalScale:2,suffix:"%"})," ->  ",Object(k.jsx)(x.a,{width:"80px",allowZero:!0,value:100*oe.percentage1,decimalScale:2,suffix:"%"})]})]}),Object(k.jsxs)("div",{className:"staked-balance",children:[Object(k.jsx)("div",{className:"info-box-title",children:n["staked-balance"]}),Object(k.jsxs)("div",{className:"info-box-num",children:[Object(k.jsx)(x.a,{width:"80px",allowZero:!0,value:I.formatShares,decimalScale:2})," -> ",Object(k.jsx)(x.a,{width:"80px",allowZero:!0,value:oe.shares1,decimalScale:2}),"v2"===N||"v3"===N||"v3_lite"===N?" "+S:" "+n.shares]})]})]}),ne&&"add"===s&&Object(k.jsxs)("div",{className:"isBTokenAdequate",children:[Object(k.jsx)("div",{className:"warning-logo",children:Object(k.jsx)("img",{src:O.default})}),Object(k.jsx)("div",{className:"warning-text",children:t("insufficient-B0",{bToken:S,b0Token:56===+d||97===+d?"BUSD":"USDC"})})]})]}),Object(k.jsxs)("div",{className:"add-remove-btn",children:["add"===s&&Object(k.jsx)(j.a,{alert:ce,disabled:V,fontWeight:"bold",onClick:pe,bToken:S,pool:w,wallet:a,bTokenId:y,fontSize:"18",type:f.o,width:"331",label:n["add-liquidity"],lang:n}),"remove"===s&&Object(k.jsx)(j.a,{alert:ce,disabled:V,fontWeight:"bold",onClick:he,bToken:S,pool:w,type:f.o,wallet:a,bTokenId:y,fontSize:"18",width:"331",label:n["remove-liquidity"],lang:n})]})]})}var w=a(1412),N=a(108),S=a(171),T=(a(2106),a(1671),a(467)),C=a(465),I=a(468),q=a(464),E=a(466),F=a.p+"static/media/deri.520d2449.svg",B=a(1435),_=a(469),L=a(1269),H=a(297),A=a(167),$=N[m.DeriEnv.get()].chainInfo;function U(e){var t=e.wallet,a=e.chainId,n=e.nowApy,s=e.poolInfo,l=e.address,d=e.nowToken,b=e.lang,j=e.version,p=e.type,f=e.poolConfig,m=e.symbols,O=Object(o.useState)("show"),g=Object(c.a)(O,2),y=g[0],w=g[1],N=Object(o.useState)(),S=Object(c.a)(N,2),T=S[0],C=S[1],I=Object(u.c)(),q=function(){var e=Object(i.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.request("getVenusEarned",[t.detail.chainId,l,t.detail.account]);case 2:a=e.sent,C(a=+a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(i.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.request("claimXVSLp",[t.detail.chainId,l,t.detail.account],{includeResponse:!0,write:!0,subject:b["claim-XVS"]});case 2:if((a=e.sent)&&a.success){e.next=9;break}if(""!==a.response.transactionHash){e.next=6;break}return e.abrupt("return",!1);case 6:I.error("".concat(b["transaction-failed"]," : ").concat(a.response.error),{timeout:3e5,isTransaction:!0,transactionHash:a.response.transactionHash,link:"".concat(t.blockExploreUrl,"/tx/").concat(a.response.transactionHash),title:b["claim-reward-executed"]}),e.next=10;break;case 9:I.success(b["claim-XVS-reward"],{timeout:8e3,isTransaction:!0,transactionHash:a.response.data.transactionHash,link:"".concat(t.blockExploreUrl,"/tx/").concat(a.response.data.transactionHash),title:b["claim-reward-failed"]});case 10:q();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){if(t.isConnected()&&("v3"===j||"v3_lite"===j)){var e;return q(),e=window.setInterval((function(){q()}),18e4),function(){e&&clearInterval(e)}}}),[t,t.detail]),Object(k.jsxs)("div",{className:"pool-info",children:[Object(k.jsxs)("div",{className:"pool-info-title",children:[Object(k.jsx)("div",{className:"pool-info-title-text",children:b["pool-info"]}),Object(k.jsxs)("div",{className:"down-up",children:["show"===y&&Object(k.jsx)("span",{onClick:function(){return w("hide")},children:Object(k.jsx)("img",{className:"up-icon",alt:"",src:H.default})}),"hide"===y&&Object(k.jsx)("span",{onClick:function(){return w("show")},children:Object(k.jsx)("img",{alt:"",src:H.default})})]})]}),Object(k.jsxs)("div",{className:"'pool-info-text' ".concat(y),children:[Object(k.jsxs)("div",{className:"pool-info-text-one",children:["v2_lite_open"!==j&&Object(k.jsxs)("div",{className:"info-box",children:[Object(k.jsx)("div",{className:"info-box-title",children:b.apy}),Object(k.jsxs)("div",{className:"info-box-num",children:["v3"!==j&&"v3_lite"!==j&&Object(k.jsx)(x.a,{value:s.apy,displayType:"text",decimalScale:2,suffix:"%"}),("v3"===j||"v3_lite"===j)&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(L.a,{text:Object(k.jsx)(x.a,{width:"50px",value:n.apy,displayType:"text",decimalScale:2,suffix:"%"}),tip:b["deri-apy"]}),"\xa0 +  \xa0  ",Object(k.jsx)(L.a,{text:Object(k.jsx)(x.a,{width:"50px",value:n.supplyApy,displayType:"text",decimalScale:2,suffix:"%"}),tip:42161!==+a?b["venus-suppy-apy"]:b["aave-suppy-apy"]}),"  \xa0 ",42161!==+a&&"+","  \xa0",42161!==+a&&Object(k.jsx)(L.a,{text:Object(k.jsx)(x.a,{width:"50px",value:n.xvsApy,displayType:"text",decimalScale:2,suffix:"%"}),tip:b["xvs-distribution-apy"]})]})]})]}),Object(k.jsxs)("div",{className:"info-box",children:[Object(k.jsx)("div",{className:"info-box-title",children:b["pool-liquidity"]}),Object(k.jsxs)("div",{className:"info-box-num",children:[Object(k.jsx)(x.a,{value:s.total,displayType:"text",decimalScale:2,thousandSeparator:!0})," ","v3"===j||"v3_lite"===j?56===+a||97===+a?"BUSD":"USDC":d]})]}),("v2"===j||"v3"===j||"v3_lite"===j)&&!("option"===p&&"v2"===j)&&Object(k.jsxs)("div",{className:"info-box",children:[Object(k.jsx)("div",{className:"info-box-title",children:b.multiplier}),Object(k.jsx)("div",{className:"info-box-num",children:s.multiplier})]}),Object(k.jsxs)("div",{className:"info-box",children:[Object(k.jsx)("div",{className:"info-box-title",children:b["my-liquidity-percentage"]}),Object(k.jsx)("div",{className:"info-box-num",children:Object(k.jsx)(x.a,{allowZero:!0,value:s.percent,decimalScale:2,suffix:"%"})})]}),("v2"!==j&&"v3"!==j&&"v3_lite"!==j||"v2"===j&&"option"===p)&&Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)("div",{className:"info-box",children:[Object(k.jsx)("div",{className:"info-box-title",children:b["liquidity-share-value"]}),Object(k.jsxs)("div",{className:"info-box-num",children:[Object(k.jsx)(x.a,{allowZero:!0,decimalScale:6,value:s.shareValue,thousandSeparator:!0})," ",d]})]})}),Object(k.jsxs)("div",{className:"info-box",children:[Object(k.jsx)("div",{className:"info-box-title",children:b["staked-balance"]}),Object(k.jsxs)("div",{className:"info-box-num",children:[Object(k.jsx)(x.a,{allowZero:!0,value:s.formatShares,decimalScale:2}),"v2"!==j&&"v3"!==j&&"v3_lite"!==j||"option"===p&&"v2"===j?" "+b.shares:" "+d]})]}),("v2"!==j&&"v3"!==j&&"v3_lite"!==j||"v2"===j&&"option"===p)&&Object(k.jsxs)("div",{className:"info-box",children:[Object(k.jsx)("div",{className:"info-box-title"}),Object(k.jsxs)("div",{className:"info-box-num",children:[Object(k.jsx)(x.a,{allowZero:!0,decimalScale:2,value:s.values,thousandSeparator:!0})," ",d]})]}),("v2"===j||"v3"===j||"v3_lite"===j)&&!("option"===p&&"v2"===j)&&Object(k.jsxs)("div",{className:"info-box",children:[Object(k.jsx)("div",{className:"info-box-title",children:Object(k.jsx)(L.a,{multiline:!0,text:b["mining-pnl"],tip:b["mining-pnl-hover"],html:!0,element:Object(k.jsxs)("span",{children:[" ",Object(k.jsxs)("div",{children:[b["mining-pnl-hover-one"]," "]}),b["mining-pnl-hover"]," ",Object(k.jsxs)("div",{children:[Object(k.jsx)("a",{target:"_blank",href:"https://docs.deri.io/how-it-works/mining-amm-liquidity-mining#ii.-base-token-profit-with-market-risk",children:b["learn-more-pnl"]})," "]})," "]})})}),Object(k.jsxs)("div",{className:"info-box-num",children:[Object(k.jsx)(x.a,{allowZero:!0,prefix:" ",value:s.pnl,decimalScale:2}),"  ","v3"===j||"v3_lite"===j?56===+a||97===+a?"BUSD":"USDC":f&&f.bTokens[0].bTokenSymbol," (",Object(k.jsx)(x.a,{value:s.pnlPercentage,decimalScale:2,suffix:"%"}),")"]})]}),("v3"===j||"v3_lite"===j)&&(56===+a||97===+a)&&Object(k.jsxs)("div",{className:"info-box",children:[Object(k.jsx)("div",{className:"info-box-title",children:b["xvs-earned"]}),Object(k.jsxs)("div",{className:"info-box-num collect-box",children:[Object(k.jsx)(x.a,{value:T,decimalScale:2}),Object(k.jsx)(A.a,{onClick:E,className:"collect",label:b.collect})]})]})]}),Object(k.jsxs)("div",{className:"pool-info-text-two",children:["lp"!==p&&Object(k.jsxs)("div",{className:"info-box",children:[Object(k.jsx)("div",{className:"info-box-title",children:b.symbols}),Object(k.jsx)("div",{className:"info-box-num symbols",children:Object(k.jsx)(L.a,{tip:m,children:m})})]}),Object(k.jsxs)("div",{className:"info-box",children:[Object(k.jsx)("div",{className:"info-box-title",children:b["contract-address"]}),Object(k.jsx)("div",{className:"info-box-num",children:Object(k.jsx)("a",{target:"_blank",rel:"noreferrer",href:"".concat($[a]&&$[a].viewUrl,"/address/").concat(l),children:Object(h.i)(l)})})]})]})]})]})}var D=a(28),R=a(1464);function P(e){let{lang:t,address:a,checkoutBaseToken:n,nowToken:i,chainId:c,bTokenList:s,version:r,type:l}=e;const[d,u]=Object(o.useState)([]),b=e=>{e.target.src=_.default};return Object(o.useEffect)((()=>{u(s)}),[s]),Object(k.jsxs)("div",{className:"select-basetoken-info",children:[Object(k.jsxs)("div",{className:"select-coin-title-search",children:[Object(k.jsxs)("div",{className:"select-coin-title",children:[" ",t["select-the-coin"]]}),Object(k.jsx)("div",{className:"search-box",children:Object(k.jsx)(R.a,{list:s,searchName:"bTokenSymbol",onChange:e=>u(e)})})]}),Object(k.jsxs)("div",{className:"coin-search",children:[Object(k.jsx)("div",{className:"slide-icon left",children:Object(k.jsx)(D.a,{token:"arrow-left",width:"24",height:"24"})}),Object(k.jsxs)("div",{className:"v3"===r||"v3_lite"===r?"coin-list some-coin":"coin-list",children:["lp"!==l&&"v2_lite_open"!==r&&Object(k.jsx)(k.Fragment,{children:d.map(((e,a)=>Object(k.jsxs)("div",{className:i===e.bTokenSymbol?"coin-box checked-base":"coin-box",onClick:()=>{n(e.bTokenId,e.bTokenSymbol)},children:[Object(k.jsxs)("div",{className:"base-apy-info",children:[Object(k.jsx)("div",{className:`btoken-logo ${e.bTokenSymbol}`}),Object(k.jsxs)("div",{className:"apy-base-staked",children:[Object(k.jsx)("div",{className:"base-name",children:e.bTokenSymbol}),Object(k.jsxs)("div",{className:"base-apy",children:[t.apy," \xa0 ",Object(k.jsx)(x.a,{width:"50px",value:e.apy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2}),("v3"===r||"v3_lite"===r)&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("span",{children:[" +  ",Object(k.jsx)(x.a,{width:"50px",value:e.supplyApy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2}),"  ",42161!==+c&&"+"]}),42161!==+c&&Object(k.jsx)(x.a,{width:"50px",value:e.xvsApy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2})]})]})]})]}),e.staked&&Object(k.jsx)("img",{src:B.a,alt:""})]})))}),"v2_lite_open"===r&&Object(k.jsx)(k.Fragment,{children:d.map(((e,a)=>Object(k.jsxs)("div",{className:"coin-box checked-base",onClick:()=>{n(e.bTokenId)},children:[Object(k.jsxs)("div",{className:"base-apy-info",children:[Object(k.jsx)("div",{className:`btoken-logo ${e.bTokenSymbol}`,children:Object(k.jsx)("img",{alt:"",onError:b,src:`https://raw.githubusercontent.com/deri-finance/deri-open-zone/main/img/${e.bTokenSymbol}.png`})}),Object(k.jsx)("div",{className:"apy-base-staked",children:Object(k.jsx)("div",{className:"base-name",children:e.bTokenSymbol})})]}),e.staked&&Object(k.jsxs)("div",{className:"stake",children:[Object(k.jsx)("img",{src:B.a,alt:""}),t.staked]})]})))}),"lp"===l&&s.length&&Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("div",{className:"coin-box checked-base",children:Object(k.jsxs)("div",{className:"base-apy-info",children:[Object(k.jsxs)("div",{className:"lp-btoken-logo",children:[Object(k.jsx)("div",{className:`btoken-logo ${s[0].bTokenSymbol}`}),Object(k.jsx)("span",{className:"conect-logo",children:"+"}),Object(k.jsx)("div",{className:`btoken-logo ${s[1].bTokenSymbol}`})]}),Object(k.jsxs)("div",{className:"apy-base-staked",children:[Object(k.jsx)("div",{className:"base-name",children:i}),Object(k.jsxs)("div",{className:"base-apy",children:[Object(h.v)(a)&&Object(k.jsxs)(k.Fragment,{children:[t.apy," \xa0 ",Object(k.jsx)(x.a,{value:s[1].apy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2})]}),Object(h.C)(a)&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(L.a,{text:`${t.apy} ${(+s[1].apy).toFixed(2)} %`,tip:t["deri-apy"]}),"\xa0 + \xa0 ",Object(k.jsx)(L.a,{text:`${t.apy}  ${(+s[1].lpApy).toFixed(2)} %`,tip:t["sushi-apy"]})]})]})]})]})})})]}),Object(k.jsx)("div",{className:"slide-icon right",children:Object(k.jsx)(D.a,{token:"arrow-right",width:"24",height:"24"})})]})]})}a(1680);var z=a(219),Z=a(1462),V=N[m.DeriEnv.get()].chainInfo;t.default=Object(d.b)("wallet","poolManager")(Object(d.c)((function(e){var t,a=e.lang,s=e.wallet,d=void 0===s?{}:s,b=e.poolManager,j=e.getLang,p=Object(l.i)(),f=p.version,O=p.chainId,g=p.address,N=p.type,L=Object(u.c)(),H=Object(o.useState)(),A=Object(c.a)(H,2),$=A[0],D=A[1],R=Object(o.useState)(""),W=Object(c.a)(R,2),M=W[0],K=W[1],X=Object(o.useState)(!1),J=Object(c.a)(X,2),G=J[0],Q=J[1],Y=Object(o.useState)(""),ee=Object(c.a)(Y,2),te=ee[0],ae=ee[1],ne=Object(o.useState)([]),ie=Object(c.a)(ne,2),ce=ie[0],se=ie[1],re=Object(o.useState)({}),oe=Object(c.a)(re,2),le=oe[0],de=oe[1],ue=Object(o.useState)(0),be=Object(c.a)(ue,2),je=be[0],pe=be[1],he=Object(o.useState)({}),xe=Object(c.a)(he,2),fe=xe[0],ve=xe[1],me=Object(S.a)(),Oe=Object(o.useState)(""),ge=Object(c.a)(Oe,2),ke=ge[0],ye=ge[1],we=Object(o.useState)(),Ne=Object(c.a)(we,2),Se=Ne[0],Te=Ne[1],Ce=Object(o.useState)({}),Ie=Object(c.a)(Ce,2),qe=Ie[0],Ee=Ie[1],Fe=Object(o.useState)(!1),Be=Object(c.a)(Fe,2),_e=(Be[0],Be[1]),Le=Object(o.useState)(0),He=Object(c.a)(Le,2),Ae=He[0],$e=He[1],Ue=Object(o.useState)(0),De=Object(c.a)(Ue,2),Re=De[0],Pe=De[1],ze=Object(o.useState)(0),Ze=Object(c.a)(ze,2),Ve=Ze[0],We=Ze[1],Me=Object(o.useState)(""),Ke=Object(c.a)(Me,2),Xe=Ke[0],Je=Ke[1],Ge=Object(o.useState)(!1),Qe=Object(c.a)(Ge,2),Ye=Qe[0],et=Qe[1],tt=V[O]&&V[O].name,at=function(){var e=Object(i.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d.isConnected()){e.next=17;break}if(t=[d.detail.chainId,g,d.detail.account],a=null,!te.isLp){e.next=9;break}return e.next=6,v.a.request("getLpWalletBalance",t);case 6:a=e.sent,e.next=16;break;case 9:if("v3"===f||"v3_lite"===f?t.push($):t.push(M),"v2_lite_open"!==f){e.next=13;break}return e.next=13,m.openConfigListCache.update();case 13:return e.next=15,v.a.request("getBTokenBalance",t);case 15:a=e.sent;case 16:Te(a);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=function(){var e=Object(i.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.request("getPendingReward",[d.detail.chainId,g,d.detail.account]);case 2:t=e.sent,Object(h.x)(g)?(ve(t),a=t.valid?t.amount:0,pe(a)):pe(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),it=function(){at(),ot(),lt()},ct=Object(o.useMemo)((function(){var e;return e={},Object(n.a)(e,a.add,{content:Object(k.jsx)(y,{chainId:O,getLang:j,poolConfig:te,isLp:N,wallet:d,afterTransaction:it,version:f,bTokenId:M,address:g,lang:a,type:"add",poolInfo:le,baseToken:$,walletBalance:Se}),style:{background:"linear-gradient(200.74deg, rgba(97, 122, 255, 0.1) -4.65%, rgba(223, 229, 255, 0) 50.94%, rgba(85, 91, 237, 0.05) 105.4%)"},borderColor:"#203B60",icon:"add-icon",iconWidth:"25",iconHeight:"25",inicon:"inactive-add",direction:"tab-left"}),Object(n.a)(e,a.remove,{content:Object(k.jsx)(y,{chainId:O,getLang:j,isLp:N,poolConfig:te,wallet:d,afterTransaction:it,lang:a,address:g,type:"remove",bTokenId:M,poolInfo:le,balance:le,baseToken:$,version:f}),style:{background:"linear-gradient(200.74deg, rgba(97, 122, 255, 0.1) -4.65%, rgba(223, 229, 255, 0) 50.94%, rgba(85, 91, 237, 0.05) 105.4%)"},borderColor:"#203B60",icon:"remove-icon",iconWidth:"25",iconHeight:"25",iconMarginRight:"20",inicon:"inactive-remove",direction:"tab-right"}),e}),[a,j,te,N,d,f,M,g,$,Se,le]),st=function(){var e=Object(i.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.load();case 2:if(t=b.pools,"lp"!==N){e.next=7;break}return e.next=6,b.loadDoubleMingingPool();case 6:t=b.lpPools;case 7:if("v2_lite_open"!==f){e.next=11;break}return e.next=10,b.loadOpen();case 10:t=b.openPools;case 11:t=(t=t.filter((function(e){return e.address===g})))[0],t.bTokens[0].bTokenSymbol,Object(h.v)(g)?"PANCAKE-LP":Object(h.C)(g)&&"DERI-USDT SLP",a=(a=t.symbols.map((function(e){var t=[];return t.push(e.symbol),t}))).join(","),ye(a),ae(t),se(t.bTokens);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),rt=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!te){e.next=6;break}return e.next=3,te.getPoolInfo(d,te);case 3:return(t=e.sent).bTokensApy&&ce.map((function(e){if("v2"===f)e.apy=100*+t.bTokensApy.filter((function(t){return t.bTokenId===e.bTokenId}))[0].apy;else if("v2_lite_open"!==f&&"v3"!==f&&"v3_lite"!==f)e.apy=100*+t.bTokensApy[0].apy,Object(h.C)(g)&&(e.lpApy=t.lpApy);else if("v3"===f||"v3_lite"===f){var a=t.bTokensApy.find((function(t){return t.bTokenSymbol===e.bTokenSymbol}));a&&(e.apy=100*+a.apy,e.supplyApy=(100*+a.supplyApy).toFixed(3),e.xvsApy=100*+a.xvsApy)}return e})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ot=function(){var e=Object(i.a)(r.a.mark((function e(){var t,a,n,i,c,s,o,l,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},!te){e.next=12;break}return e.next=4,te.getPoolInfo(d,te);case 4:if((a=e.sent).bTokensApy&&a.bTokensLiq&&("v2"===f&&M?(o=a.bTokensApy.filter((function(e){return e.bTokenId===M})),n=o[0].apy,l=o[0].multiplier,s=(s=a.bTokensLiq.filter((function(e){return e.bTokenId===M})))[0].liquidity):"v2_lite_open"!==f&&"v3"!==f&&"v3_lite"!==f?(n=a.bTokensApy[0].apy,s=a.bTokensLiq[0].liquidity):"v3"!==f&&"v3_lite"!==f||((o=a.bTokensApy.filter((function(e){return e.bTokenSymbol===$}))).length&&(n=o[0].apy,i=o[0].supplyApy,c=o[0].xvsApy,l=o[0].multiplier),(s=a.bTokensLiq.filter((function(e){return e.bTokenSymbol===$}))).length&&(s=s[0].liquidity)),t={total:s,apy:100*+n,supplyApy:100*+i,xvsApy:100*+c,multiplier:l}),!d.isConnected()){e.next=11;break}return e.next=9,te.getLiquidityInfo(d,g,te.version,te.isLp,N,$,M);case 9:(u=e.sent)&&(t=u,"v3"!==f&&"v3_lite"!==f||(t.supplyApy=100*+i,t.xvsApy=100*+c),t.apy=100*+n,t.multiplier=l);case 11:de(t);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),lt=function(){var e=Object(i.a)(r.a.mark((function e(){var t,a,n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d.isConnected()||!te){e.next=9;break}return e.next=3,te.getIsStaked(d,te);case 3:(t=e.sent).bTokens&&ce.map((function(e){if("v2"===f&&"option"!==N)e.staked=t.bTokens.filter((function(t){return t.bTokenId===e.bTokenId}))[0].isStaked;else if("v3"===f||"v3_lite"===f){var a=t.bTokens.filter((function(t){return t.bTokenSymbol===e.bTokenSymbol}));e.staked=!!a.length&&a[0].isStaked}else e.staked=t.isStaked;return e})),a=[],ce.forEach((function(e,t){if(e.staked)return a.push(e),void ce.splice(t,1)})),ce.unshift.apply(ce,a),ce.length&&(n=ce[0].bTokenSymbol,Object(h.v)(g)?n="PANCAKE-LP":Object(h.C)(g)&&(n="DERI-USDT SLP"),i=ce[0].bTokenId,D(n),K(i));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),dt=function(){var e=Object(i.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="v3"!==f&&"v3_lite"!==f?te.bTokens.filter((function(e){return e.bTokenId===t})):te.bTokens.filter((function(e){return e.bTokenSymbol===a})),de({}),K(t),Te(""),D(n[0].bTokenSymbol),Q();case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ut=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==+je){e.next=3;break}return L.error(a["no-deri-to-claim-yet"]),e.abrupt("return");case 3:if(!Object(h.x)(g)){e.next=8;break}if(!(parseInt(Date.now()/1e3)%28800<1800)){e.next=8;break}return L.error(a["claiming-DERI-is-disabled-during-first-30-minutes-of-each-epoch"]),e.abrupt("return");case 8:return et(!0),e.next=11,v.a.request("claimReward",[d.detail.chainId,g,d.detail.account],{includeResponse:!0,write:!0,subject:a["claim-deri-title"]});case 11:if(t=e.sent,nt(),et(!1),!t.success){e.next=21;break}return pe(0),L.success(a["claim-deri-reward"],{timeout:8e3,isTransaction:!0,transactionHash:t.response.data.transactionHash,link:"".concat(d.blockExploreUrl,"/tx/").concat(t.response.data.transactionHash),title:a["claim-reward-executed"]}),pe(0),e.abrupt("return",!0);case 21:if(""!==t.response.transactionHash){e.next=23;break}return e.abrupt("return",!1);case 23:return L.error("".concat(a["transaction-failed"]," : ").concat(t.response.error),{timeout:3e5,isTransaction:!0,transactionHash:t.response.transactionHash,link:"".concat(d.blockExploreUrl,"/tx/").concat(t.response.transactionHash),title:a["claim-reward-failed"]}),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){if(d.detail.chainId&&d.detail.chainId!==O&&d.switchNetwork(me[O]),d.isConnected()){var e=window.setInterval(nt,3e4);return nt(),function(){return clearInterval(e)}}}),[d.detail,d]),Object(o.useEffect)((function(){st()}),[]),Object(o.useEffect)((function(){if(Te(""),ce.length&&($||M)){var e,t={};if("v2"!==f)t=ce.filter((function(e){return e.bTokenSymbol===$}))[0];else if("v2"===f){t=ce.filter((function(e){return e.nowTokenId===M}))[0]}Ee(t),"v2"===f&&"option"!==N?M&&(e=ce.filter((function(e){return e.bTokenId===M}))[0].staked):"lp"!==N&&(e=ce.filter((function(e){return e.bTokenSymbol===$}))[0].staked),Q(e)}}),[ce,$,M]),Object(o.useEffect)((function(){rt()}),[te,ce]),Object(o.useEffect)((function(){ot(),at()}),[M,te,d.detail.account,$]),Object(o.useEffect)((function(){lt()}),[te,d.detail.account,ce]),Object(o.useEffect)((function(){if(d.isConnected()){var e=Object(h.m)("poolClaim"),t=sessionStorage.getItem("poolGuideThree");"true"===e?_e(!1):"3"===t&&_e(!0)}}),[d,d.detail]),Object(o.useEffect)((function(){var e;return e=window.setInterval((function(){var e=28800,t=parseInt(Date.now()/1e3),n=parseInt(t/e)*e,i=n+e-t,c=parseInt(i/3600),s=parseInt(i%3600/60),r=parseInt(i%60);$e(n),Pe(n+e),We(t),Je("".concat(c," ").concat(a.h," ").concat(s," ").concat(a.m," ").concat(r," ").concat(a.s))}),1e3),function(){e&&clearInterval(e)}}),[]),Object(k.jsxs)("div",{className:"pool-detail",children:[Object(k.jsx)("div",{className:"back-pool",children:Object(k.jsxs)("div",{className:"icon-back",onClick:function(){window.history.back(-1)},children:[Object(k.jsx)("img",{alt:"",src:T.default}),Object(k.jsx)("span",{children:a.back})]})}),Object(k.jsxs)("div",{className:"pool-deatail-info",children:[Object(k.jsxs)("div",{className:"pool-detail-basetoken-info",children:[Object(k.jsxs)("div",{className:"pool-info-text",children:[Object(k.jsxs)("div",{className:"pool-network-type",children:[Object(k.jsx)("div",{className:"network-logo",children:Object(k.jsx)("img",{alt:"",src:function(e){var t,a=+e;return 56===a||97===a?t=C.default:137===a?t=I.default:1===a?t=q.default:42161!==a&&421611!==a||(t=E.default),t}(O)})}),Object(k.jsxs)("div",{className:"pool-type-network-text",children:[Object(k.jsxs)("div",{className:"pool-type-text",children:["0xD2D950e338478eF7FeB092F840920B3482FcaC40"!==g&&Object(k.jsxs)(k.Fragment,{children:[a[te.type]," ",a[te.zone]]}),"0xD2D950e338478eF7FeB092F840920B3482FcaC40"===g&&Object(k.jsx)(k.Fragment,{children:a[te.zone]})]}),Object(k.jsx)("div",{className:"pool-network-text",children:"BSC"===tt?"BNB Chain":tt})]})]}),Object(k.jsxs)("div",{className:"pool-des",children:["lp"!==N&&a["amm-pool-des"],"clp"===f&&Object(k.jsx)(k.Fragment,{children:a["deri-pancake-pool"]}),"slp"===f&&Object(k.jsx)(k.Fragment,{children:a["deri-sushi-pool"]}),Object(k.jsx)("br",{}),"lp"!==N?Object(k.jsx)("a",{rel:"norelerror",target:"_blank",href:"https://docs.deri.io/library/faqs/mining-faq#is-the-amm-liquidity-mining-on-deri-pools-risk-free",children:Object(k.jsxs)("span",{className:"learn-more",children:[" ",a["learn-more"]]})}):Object(k.jsx)("a",{rel:"norelerror",target:"_blank",href:"https://docs.deri.io/library/faqs/mining-faq#is-dex-liquidity-mining-on-sushiswap-sushiswap-onsen-and-pancakeswap-deri-risk-free",children:Object(k.jsxs)("span",{className:"learn-more",children:[" ",a["learn-more"]]})})]})]}),Object(k.jsx)(P,{lang:a,chainId:O,address:g,checkoutBaseToken:dt,nowToken:$,bTokenList:ce,version:f,type:N})]}),Object(k.jsxs)("div",{className:"pool-detail-add-remove-info",children:[Object(k.jsxs)("div",{className:"mining-deri-liquidity",children:[Object(k.jsxs)("div",{className:"btoken-liquidity",children:["lp"!==N&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"btoken-logo ".concat($),children:"v2_lite_open"===f&&Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("img",{alt:"",onError:function(e){e.target.src=_.default},src:"https://raw.githubusercontent.com/deri-io/deri-open-zone/main/img/".concat($,".png")})})}),Object(k.jsxs)("div",{className:"manage-stake",children:[Object(k.jsxs)("div",{className:"manage",children:[a.manage," ",$," ",a.liquidity]}),G&&Object(k.jsxs)("div",{className:"stake",children:[Object(k.jsx)("img",{src:B.a,alt:""}),a.staked]})]})]}),"lp"===N&&ce.length&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{className:"lp-btoken-logo",children:[Object(k.jsx)("div",{className:"btoken-logo ".concat(ce[0].bTokenSymbol)}),Object(k.jsx)("span",{className:"conect-logo",children:"+"}),Object(k.jsx)("div",{className:"btoken-logo ".concat(ce[1].bTokenSymbol)})]}),Object(k.jsxs)("div",{className:"manage-stake",children:[Object(k.jsxs)("div",{className:"manage",children:[a.manage," ",$," ",a.liquidity]}),G&&Object(k.jsxs)("div",{className:"stake",children:[Object(k.jsx)("img",{src:B.a,alt:""}),a.staked]})]})]})]}),Object(k.jsx)("div",{className:"deri-current-epoch",children:"v2_lite_open"!==f&&te.rewarded&&Object(k.jsxs)(k.Fragment,{children:[Object(h.x)(g)&&Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)("div",{className:"deri-num-slider",children:[Object(k.jsx)("div",{className:"deri-cliam-remaining",children:Xe}),Object(k.jsx)("div",{className:"deri-claim-slider",children:Object(k.jsx)(Z.a,{startTimestamp:Ae,nowTimestamp:Ve,endTimestamp:Re})}),Object(k.jsx)("div",{className:"deri-claim-pool-num",children:j("deri-claim-pool-num",{num:+fe.lp?(+fe.lp).toFixed(4):0})})]})}),Object(k.jsx)("div",{className:Object(h.x)(g)?"mining-pool-claim epoch-pool":"mining-pool-claim",children:Object(k.jsxs)("div",{className:"mining-claim-info",children:[Object(k.jsxs)("span",{children:[" ",a["you-have"]]}),Object(k.jsxs)("span",{className:"".concat(0===+je?"no-deri":""," mining-pool-num"),onClick:ut,children:[Ye&&Object(k.jsx)(z.a,{}),Object(k.jsx)(x.a,{value:je,decimalScale:2}),Object(k.jsx)("img",{src:F})]}),Object(k.jsx)("span",{children:a["claim-in-pool"]})]})})]})})]}),Object(k.jsxs)("div",{className:"mining-add-remove-liquidity",children:[Object(k.jsx)(U,(t={wallet:d,nowApy:qe,poolInfo:le,chainId:O,address:g,nowToken:$,lang:a},Object(n.a)(t,"poolInfo",le),Object(n.a)(t,"version",f),Object(n.a)(t,"type",N),Object(n.a)(t,"poolConfig",te),Object(n.a)(t,"symbols",ke),t)),Object(k.jsx)("div",{className:"add-remove-liquidity",children:Object(k.jsx)(w.a,{tabSet:ct,iconMarginRight:"20",width:379,size:18,inactiveBgColor:"#0c192d",icon:"",borderBottom:!0,divider:!0})})]})]})]})]})})))}}]);
//# sourceMappingURL=19.3beafa8c.chunk.js.map