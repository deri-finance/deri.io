(this["webpackJsonpderi-client"]=this["webpackJsonpderi-client"]||[]).push([[8],{1637:function(e,t,n){"use strict";t.a=n.p+"static/media/staked.46571832.svg"},1727:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a,r=n(244),s=n(358),c=n(9),i=n(170),o=n(23),u={};function d(e,t,n){var a=Object(i.b)(),d=function(e){return u[e]}(e),l=d.address,b=d.abi,p=a.ethereum;return l&&(n=l),Object(c.useMemo)((function(){var e=Object(o.w)(t);return p&&p.networkVersion===String(t)&&(e=new s.a(p,"any")),e?new r.b(n,b,function(e,t){return t?function(e,t){return e.getSigner(t).connectUnchecked()}(e,t):e}(e,a.account)):null}),[n,b,a])}(a=n(1638)).keys().forEach((function(e){var t=e.split("/"),n=t[t.length-1];u[n.substring(0,n.indexOf("."))]=a(e)}))},1872:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var a,r,s=n(80),c=n(2),i=n(12),o=n(0),u=n.n(o),d=n(9),l=n(74),b=n(1450),p=n(215),m=n(559),j=n(560),x=n(561),f=n(558),v=n(1637),h=n(563),O=(n(2206),n(65)),k=n(1727),g=n(31),w=n(23),y=n(6),N="0x96C3966534b4377691e11e163A0409Ad01667343";function S(e){var t=e.lang,n=e.pool,a=e.wallet,r=Object(l.g)(),s=["311860","311904"],o=Object(d.useState)({}),O=Object(i.a)(o,2),S=O[0],_=O[1],C=Object(d.useState)(n.address),T=Object(i.a)(C,2),q=T[0],I=T[1],X=Object(d.useState)(!1),L=Object(i.a)(X,2),B=L[0],E=L[1],P=Object(d.useState)(),D=Object(i.a)(P,2),z=D[0],A=D[1],U=Object(d.useState)(!0),M=Object(i.a)(U,2),R=(M[0],M[1]),V=Object(d.useState)([]),J=Object(i.a)(V,2),G=J[0],Z=J[1],H=Object(d.useState)([]),K=Object(i.a)(H,2),Q=K[0],W=K[1],Y=Object(d.useState)(0),$=Object(i.a)(Y,2),ee=$[0],te=$[1],ne=Object(d.useState)(0),ae=Object(i.a)(ne,2),re=ae[0],se=ae[1],ce=Object(d.useState)(),ie=Object(i.a)(ce,2),oe=ie[0],ue=ie[1],de=Object(d.useState)(0),le=Object(i.a)(de,2),be=le[0],pe=le[1],me=Object(k.a)("ERC20",42161,"0x21E60EE73F17AC0A411ae5D690f908c3ED66Fe12"),je=Object(k.a)("ERC20",42161,"0x82af49447d8a07e3bd95bd0d56f35241523fbab1"),xe=Object(k.a)("arbitrumLp",42161),fe=Object(k.a)("LpTokenId",42161),ve=Object(k.a)("PairAbi",42161),he=Object(d.useCallback)(Object(c.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _({}),e.next=3,n.getPoolInfo(n.address,n.chainId,n.version);case 3:t=e.sent,I(n.address),_(t);case 6:case"end":return e.stop()}}),e)}))),[n]),Oe=Object(d.useCallback)(Object(c.a)(u.a.mark((function e(){var t,n,a,r,s,c,i,o,d,l,b,p,m,j,x;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _({}),e.next=3,me.balanceOf(N);case 3:return t=e.sent,e.next=6,je.balanceOf(N);case 6:return n=e.sent,a="".concat("https://infoapi.deri.io","/stats_for_token"),r="https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=USD",e.next=11,fetch(a);case 11:return s=e.sent,e.next=14,s.json();case 14:return c=e.sent,e.next=17,fetch(r);case 17:return i=e.sent,e.next=20,i.json();case 20:o=e.sent,d=c.data.price,l=o.ethereum.usd,b=g.a.from(t._hex).toString()/Math.pow(10,18),p=g.a.from(n._hex).toString()/Math.pow(10,18),m=Object(w.a)(b).times(d).toNumber(),j=Object(w.a)(p).times(l).toNumber(),x=m+j,console.log("getLiquidity",x),_({liquidity:x});case 30:case"end":return e.stop()}}),e)}))),[me,je]),ke=function(){var e=Object(c.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||"v3"!==n.version&&"v3_lite"!==n.version){e.next=5;break}return e.next=3,n.getVenusEarned(a,n.address);case 3:t=e.sent,A(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=Object(d.useCallback)(Object(c.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getIsStaked(a,n);case 2:(t=e.sent)&&(E(t.isStaked),I(t.poolAddress));case 4:case"end":return e.stop()}}),e)}))),[a,n]),we=Object(d.useCallback)(function(){var e=Object(c.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,setTimeout(Object(c.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.map(function(){var e=Object(c.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,xe.getSecondsPerLiquidityInsideX128(t);case 3:return(a=e.sent)&&(n.id=t,n.timestamp=g.a.from(a.timestamp._hex).toString(),n.secondsPerLiquidityInsideX128=g.a.from(a.secondsPerLiquidityInsideX128._hex).toString()),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:t=e.sent,W(t);case 5:case"end":return e.stop()}}),e)}))),5e3);case 2:return e.abrupt("return",undefined);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[xe]),ye=(Object(d.useCallback)(Object(c.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.map(function(){var e=Object(c.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},console.log(xe),e.next=4,xe.getSecondsPerLiquidityInsideX128(t);case 4:return(a=e.sent)&&(n.id=t,n.timestamp=g.a.from(a.timestamp._hex).toString(),n.secondsPerLiquidityInsideX128=g.a.from(a.secondsPerLiquidityInsideX128._hex).toString()),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:t=e.sent,we(),Z(t);case 6:case"end":return e.stop()}}),e)}))),[xe]),Object(d.useCallback)(Object(c.a)(u.a.mark((function e(){var t,n,a,r,o,d,l,b,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.map(function(){var e=Object(c.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,fe.positions(t);case 3:return a=e.sent,n={tickLower:a.tickLower,tickUpper:a.tickUpper,liquidity:g.a.from(a.liquidity._hex).toString()},e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:return t=e.sent,e.next=6,ve.slot0();case 6:return n=(n=e.sent).tick,a=t.map((function(e){var t=Object(w.o)(n,e.tickLower,e.tickUpper,e.liquidity),a=Object(i.a)(t,2),r=a[0],s=a[1];return{deri:r/Math.pow(10,18),eth:s/Math.pow(10,18)}})),r=a.reduce((function(e,t){return e+t.deri}),0),o=a.reduce((function(e,t){return e+t.eth}),0),"https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=USD",e.next=14,fetch("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=USD");case 14:return d=e.sent,e.next=17,d.json();case 17:l=e.sent,b=l.ethereum.usd,p=Object(w.a)(o).times(b).toNumber(),se(p),pe(r);case 22:case"end":return e.stop()}}),e)}))),[fe,s,ve]),Object(d.useCallback)(Object(c.a)(u.a.mark((function e(){var t,n,a,r,s,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ee&&be&&re)){e.next=14;break}return t="".concat("https://infoapi.deri.io","/stats_for_token"),e.next=4,fetch(t);case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,r=a.data.price,s=Object(w.a)(be).times(r).toNumber(),c=s+re,i=Object(w.a)(ee).times(r).toNumber(),ue(i/c*100);case 14:case"end":return e.stop()}}),e)}))),[ee,be,re]),Object(d.useCallback)(Object(c.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Q.map(function(){var e=Object(c.a)(u.a.mark((function e(t){var n,a,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=G.find((function(e){return e.id===t.id})),a=n.secondsPerLiquidityInsideX128,e.next=4,xe.getRewardInBetween(t.id,t.timestamp,a,t.secondsPerLiquidityInsideX128);case 4:if(!(r=e.sent)){e.next=8;break}return s={reward:g.a.from(r._hex).toString()/Math.pow(10,18),id:t.id,timestamp:t.timestamp-n.timestamp},e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:0!==(t=e.sent)[0].timestamp&&(n=t.reduce((function(e,t){return e+t.reward}),0),31536e6,a=n/(1e3*t[0].timestamp)*31536e6,te(a));case 5:case"end":return e.stop()}}),e)}))),[G,Q,xe]),function(e){e.target.src=h.default});Object(d.useEffect)((function(){"ulp"===n.version&&me?Oe():he(),a.isConnected()&&(ge(),ke())}),[n,a.detail.account,me,je]),Object(d.useEffect)((function(){var e=sessionStorage.getItem(n.address);null!==e&&e&&R(!1)}),[n]);var Ne="ulp"===n.version?"/lppool/".concat(n.chainId,"/").concat(n.address):"/pool/".concat(n.version||"v1","/").concat(n.chainId,"/").concat(n.type,"/").concat(n.address);return Object(y.jsx)("div",{className:"".concat("0x243681B8Cd79E3823fF574e07B2378B8Ab292c1E"===n.address?"showGuide":""," card-box"),children:Object(y.jsxs)("div",{className:"v2_lite_open"===n.version?"card-list open-list":"card-list",onClick:function(){!function(e){"v2_lite_open"!==n.version&&r.push(e)}(Ne)},children:[Object(y.jsxs)("div",{className:"card-header ".concat(n.retired?"".concat(n.version):""," ").concat(n.new?"new":""),children:[Object(y.jsxs)("div",{className:"pool-network-type",children:[Object(y.jsx)("div",{className:"network-logo",children:Object(y.jsx)("img",{alt:"",src:function(e){var t;return"56"===e||"97"===e?t=m.default:"137"===e?t=x.default:"1"===e?t=f.default:"42161"!==e&&"421611"!==e||(t=j.default),t}(n.chainId)})}),Object(y.jsxs)("div",{className:"pool-type-network-text",children:[Object(y.jsxs)("div",{className:"pool-type-text",children:["0xD2D950e338478eF7FeB092F840920B3482FcaC40"!==n.address&&Object(y.jsxs)(y.Fragment,{children:[t[n.type]," ",t[n.zone]]}),"0x1eF92eDA3CFeefb8Dae0DB4507f860d3b73f29BA"===n.address&&Object(y.jsx)(y.Fragment,{children:"DERI-based"}),"0xD2D950e338478eF7FeB092F840920B3482FcaC40"===n.address&&Object(y.jsx)(y.Fragment,{children:t[n.zone]})]}),Object(y.jsx)("div",{className:"pool-network-text",children:"BSC"===n.chain.toUpperCase()?"BNB Chain":n.chain.toUpperCase()})]})]}),Object(y.jsxs)("div",{className:"base-token-logo",children:[n.isLp&&Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("div",{className:"lp-base-token-bg",children:[Object(y.jsx)("div",{className:"base-token-bg ".concat(n.bTokens[0].bTokenSymbol)}),Object(y.jsx)("span",{className:"lp-con",children:"+"}),Object(y.jsx)("div",{className:"base-token-bg ".concat(n.bTokens[1].bTokenSymbol)})]})}),!n.isLp&&"v3"!==n.version&&"v3_lite"!==n.version&&Object(y.jsx)(y.Fragment,{children:n.bTokens.map((function(e,t){return Object(y.jsx)("div",{className:"base-token-box-bg no-animation-tokens",children:Object(y.jsx)("div",{className:"base-token-bg ".concat(e.bTokenSymbol),children:"v2_lite_open"===n.version&&Object(y.jsx)(y.Fragment,{children:Object(y.jsx)("img",{alt:"",onError:ye,src:"https://raw.githubusercontent.com/deri-finance/deri-open-zone/main/img/".concat(e.bTokenSymbol,".png")})})})},t)}))}),("v3"===n.version||"v3_lite"===n.version)&&!n.singleBtoken&&Object(y.jsx)(F,{bTokens:n.bTokens}),("v3"===n.version||"v3_lite"===n.version)&&n.singleBtoken&&Object(y.jsx)("div",{className:"base-token-box-bg no-animation-tokens",children:Object(y.jsx)("div",{className:"base-token-bg ".concat(n.bTokens[0].bTokenSymbol)})})]})]}),Object(y.jsxs)("div",{className:"card-content",children:[Object(y.jsx)("div",{className:"max-apy",children:"v2_lite_open"!==n.version&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"max-apy-title",children:"v2"===n.version||"v3_lite"===n.version||"v3"===n.version?t["max-apy"]:t.apy}),Object(y.jsx)("div",{className:"max-apy-num",children:Object(y.jsx)(b.a,{value:"ulp"===n.version?oe:S.apy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2})})]})}),Object(y.jsxs)("div",{className:"total-pool-liquidity",children:[Object(y.jsx)("div",{className:"total-liquidity-title",children:t["total-pool-liquidity"]}),Object(y.jsx)("div",{className:"total-liquidity-num",children:Object(y.jsx)(b.a,{value:S.liquidity,displayType:"text",thousandSeparator:!0,decimalScale:"lp"===n.type?"ulp"===n.version?0:7:0})})]}),Object(y.jsxs)("div",{className:"your-deri-epoch",children:[B&&q===n.address&&Object(y.jsxs)("div",{className:"staked-box",children:[Object(y.jsx)("img",{src:v.a,alt:""}),t.staked]}),+z>0&&("v3"===n.version||"v3_lite"===n.version)&&Object(y.jsx)("span",{className:"xvs-collectable",children:Object(y.jsxs)("div",{className:"staked-box",children:[Object(y.jsx)(b.a,{width:"50px",value:z,displayType:"text",thousandSeparator:!0,decimalScale:2})," \xa0 XVS  ",t.collectable]})})]}),Object(y.jsx)("div",{className:"stake-button",children:Object(y.jsx)(p.a,{disabled:"v2_lite_open"===n.version,className:"button",outline:!0,label:"v2_lite_open"===n.version?t.operating:t.stake})})]})]})})}var _=O.a.div(a||(a=Object(s.a)(["\n  @-webkit-keyframes explode {\n    0% {\n        transform: translateX(0px);\n        -moz-transform : translateX(0px);\n    }\n    100% {\n        transform: translateX(100px);\n        -moz-transform : translateX(100px);\n    }\n  }\n\n  @keyframes explode {\n    0% {\n        transform: translateX(0px);\n        -moz-transform : translateX(0px);\n    }\n    100% {\n        transform: translateX(100px) ;\n        -moz-transform : translateX(100px) ;\n    }\n  }\n  .base-token{\n    margin-left: 0px !important;\n    z-index : -2;\n    visibility: hidden;\n    background-color: #111e34;\n    border : 1px solid #fff;\n  }\n  @media only screen and (max-width: 760px) {\n    .base-token{\n      display:none;\n    }\n  }\n  .base-token-box-bg.explode:hover .move  {\n    -webkit-animation : explode .4s .0s linear;\n    -moz-animation :  explode .4s .0s linear;\n    animation: explode .4s .0s linear;\n    visibility: visible;    \n  }\n  \n  .base-token-box-bg.explode:hover .base-token {\n    z-index : 2 !important;\n  } \n\n"]))),C=O.a.div(r||(r=Object(s.a)(["\n  position: absolute;\n  transform : ",";\n  width: 48px;\n  height: 48px;\n  display: inline-block;\n  border-radius: 50%;\n  .move {\n    transform : translateX(100px) ",";\n  }\n"])),(function(e){return"rotate(".concat(-e.rotate,"deg)")}),(function(e){return"rotate(".concat(e.rotate,"deg)")})),F=function(e){var t=e.bTokens,n=void 0===t?[]:t,a=360/n.length;return Object(y.jsxs)(_,{className:"v3-tokens",children:[Object(y.jsx)("div",{className:"tokens",children:n.filter((function(e,t){return t<3})).map((function(e,t){return Object(y.jsx)("div",{className:"base-token-box-bg",children:Object(y.jsx)("div",{className:"base-token-bg ".concat(e.bTokenSymbol)})},t)}))}),Object(y.jsxs)("div",{className:"base-token-box-bg explode",children:[Object(y.jsxs)("div",{className:"base-token-bg num-token",children:[n.length-3," +"]}),n.map((function(e,t){var n=a*t;return Object(y.jsx)(C,{className:"base-token",rotate:n,width:"100",children:Object(y.jsx)("div",{width:"100",rotate:n,className:"base-token-bg move ".concat(e.bTokenSymbol)})},t)}))]})]})}},1873:function(e,t,n){},2206:function(e,t,n){}}]);
//# sourceMappingURL=8.fd2ac532.chunk.js.map