(this["webpackJsonpderi-client"]=this["webpackJsonpderi-client"]||[]).push([[22],{1383:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var c,a=n(10),r=n(53),s=n(52),i=n(9),o=n(30),l=n(4),u=s.a.div(c||(c=Object(r.a)(["\n    cursor: pointer;\n    width:","px;\n    height:","px;\n    display:flex;\n    .tab-title{\n      position: relative;\n    }\n    .bet-new{\n      width:30px;\n      height:14px;\n      border-radius:20px;\n      font-size:10px;\n      display: flex;\n      background-color: #CD7A37;\n      color:#E0ECFF;\n      position: relative;\n      top: -6px;\n      align-items: center;\n      text-transform: capitalize;\n      justify-content: center;\n    }\n    .tab-left.inactive{\n      border-radius:0px 0px 4px 0px;\n    }\n    .tab-right.inactive{\n      border-radius:0px 0px 0px 4px;\n    }\n    .tab-left.active{\n      border-radius:0px 4px 0px 0px;\n      ",";\n    }\n    .tab-right.active{\n      border-radius:4px 0px 0px 0px;\n      ",";\n    }\n    .inactive,.active{\n      width:50%;\n      box-sizing: content-box;\n      font-size:","px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      img{\n        margin-right:","px\n      }\n    }\n    .inactive{\n      background:",";\n      ","\n    }\n    .active {\n      color: ",";\n      background : ",";\n      ",";\n    }\n    .icon-tab{\n      margin-right:20px;\n      width:25px;\n      height:25px;\n    }\n  "])),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.borderR}),(function(e){return e.borderL}),(function(e){return e.size}),(function(e){return e.iconMarginRight}),(function(e){return e.inactiveBgColor}),(function(e){return e.borderB}),(function(e){return e.activeFontColor}),(function(e){return e.activeBgColor}),(function(e){return e.borderT}));function d(e){var t=e.tabSet,n=e.inactiveBgColor,c=e.iconMarginRight,r=e.activeBgColor,s=(e.icon,e.className),d=e.width,b=void 0===d?238:d,j=e.height,f=void 0===j?47:j,p=e.size,h=void 0===p?16:p,x=e.borderTop,O=void 0!==x&&x,m=e.borderBottom,v=void 0!==m&&m,g=e.divider,k=void 0!==g&&g,w=e.activeIndex,N=void 0===w?0:w,y=Object.keys(t),S=Object(i.useState)(y[N]),C=Object(a.a)(S,2),E=C[0],I=C[1],L=Object(i.useState)(),T=Object(a.a)(L,2),F=T[0],P=T[1],A=Object(i.useState)(),D=Object(a.a)(A,2),q=D[0],R=D[1],H=Object(i.useState)(),B=Object(a.a)(H,2),U=B[0],_=B[1],M=Object(i.useState)(),z=Object(a.a)(M,2),X=z[0],W=z[1],J=Object(i.useState)(),K=Object(a.a)(J,2),$=K[0],V=K[1],Y=Object(i.useState)(),G=Object(a.a)(Y,2),Q=G[0],Z=G[1];return Object(i.useEffect)((function(){var e=Object.keys(t);I(e[N])}),[t,N]),Object(i.useEffect)((function(){var e=Object.keys(t),n=E||e[N];if(t[n]){P(t[n].style);var c=O?"border-top:1px solid ".concat(t[n].borderColor):"border-top:0",a=v?"border-bottom:1px solid ".concat(t[n].borderColor):"border-bottom:0",r=k?"border-left:1px solid ".concat(t[n].borderColor):"border-left:0",s=k?"border-right:1px solid ".concat(t[n].borderColor):"border-right:0",i=t[n].fontColor?t[n].fontColor:"#FFFFFF";R(c),_(r),W(a),V(s),Z(i)}}),[t,E]),Object(l.jsxs)("div",{style:F,className:s,children:[Object(l.jsx)(u,{className:"tab-header",iconMarginRight:c,width:b,height:f,activeFontColor:Q,activeBgColor:r,inactiveBgColor:n,size:h,borderT:q,borderB:X,borderL:U,borderR:$,children:y.map((function(e,n){return Object(l.jsxs)("div",{className:"tab-title ".concat(t[e].direction||t[e].className,e===E?" active":" inactive"),onClick:function(t){return function(e,t){I(e)}(e)},children:[t[e].icon?Object(l.jsx)(o.a,{width:t[e].iconWidth,height:t[e].iconHeight,token:e===E?t[e].icon:t[e].inicon}):"","  ",e,t[e].isBet?Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("span",{className:"bet-new",children:"Beta"})}):null]},n)}))}),t[E]?t[E].content:""]})}},1427:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var c,a=n(10),r=n(53),s=n(9),i=n(52),o=n(511),l=n(4),u=i.a.div(c||(c=Object(r.a)(["\n  .search-token{\n  width: ","px;\n  height: ","px;\n  background: ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding:0 24px;\n  border-radius:4px;\n  img{\n    width:18px;\n    height:18px;\n  }\n  .search-input{\n    border: 0;\n    width:100%;\n    height: 100%;\n    background:transparent;\n    outline-style: none;\n    color: #FFFFFF;\n    font-size: 18px;\n    border-radius: 4px;\n  }\n}\n"])),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.bgColor}));function d(e){var t=e.list,n=e.onChange,c=e.width,r=void 0===c?"320":c,i=e.height,d=void 0===i?"48":i,b=e.bgColor,j=void 0===b?"rgba(85, 119, 253, 0.1)":b,f=e.searchName,p=void 0===f?"bTokenSymbol":f,h=e.className,x=e.placeholder,O=void 0===x?"Search":x,m=(e.onFocus,e.onBlur,Object(s.useState)("")),v=Object(a.a)(m,2),g=v[0],k=v[1],w=Object(s.useState)(0),N=Object(a.a)(w,2),y=(N[0],N[1]),S=Object(s.useRef)([]);return Object(s.useEffect)((function(){if(g){var e=g.toLocaleUpperCase();0===S.current.length&&(S.current=t,y(t.length));var c=S.current.filter((function(t){return t[p]&&t[p].toUpperCase().indexOf(e)>=0}));n(c,e)}else n(S.current)}),[g]),Object(s.useEffect)((function(){0===S.current.length&&y(t.length)}),[t]),Object(l.jsx)(u,{width:r,height:d,bgColor:j,className:h,children:Object(l.jsxs)("div",{className:"search-token",children:[Object(l.jsx)("input",{type:"text",className:"search-input",placeholder:O,value:g,onChange:function(e){!function(e){var t=e.target.value;k(t)}(e)}}),Object(l.jsx)("img",{src:o.default,alt:""})]})})}},1457:function(e,t,n){},1590:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var c,a=n(217),r=n(325),s=n(9),i=n(148),o=n(21),l={};function u(e,t,n){var c=Object(i.b)(),u=function(e){return l[e]}(e),d=u.address,b=u.abi,j=c.ethereum;return d&&(n=d),Object(s.useMemo)((function(){var e=Object(o.x)(t);return j&&j.networkVersion===String(t)&&(e=new r.a(j,"any")),e?new a.b(n,b,function(e,t){return t?function(e,t){return e.getSigner(t).connectUnchecked()}(e,t):e}(e,c.account),{pollingInterval:500}):null}),[n,b,c])}(c=n(1504)).keys().forEach((function(e){var t=e.split("/"),n=t[t.length-1];l[n.substring(0,n.indexOf("."))]=c(e)}))},1596:function(e,t,n){},1598:function(e,t,n){},1599:function(e,t,n){"use strict";t.a=n.p+"static/media/deri.520d2449.svg"},2470:function(e,t,n){"use strict";n.r(t);var c=n(334),a=n(0),r=n(2),s=n(10),i=n(9),o=n(63),l=n(54),u=n(186),d=n(1383),b=n(21),j=n(117),f=n(338),p=n(189),h=n(18),x=(n(1598),n(1457),n(504)),O=n(507),m=n(1599),v=n(1322),g=n.p+"static/media/no-nft.47097e0e.svg",k=n(243),w=n(30),N=n(1427),y=n(185),S=n(16),C=n(1590),E=n(29),I=(n(1596),n(22));var L=n(51),T=n(85),F=n.n(T),P=n(4),A=j[h.DeriEnv.get()].chainInfo,D=j[h.DeriEnv.get()].chainInfo,q="0x96C3966534b4377691e11e163A0409Ad01667343";var R=function(e){e.wallet;var t,n=e.type,c=e.lang,o=e.getLang,l=e.afterTransaction,u=e.tokenIdList,d=(e.alert,e.setActiveIndex),j=e.NFTContract,f=e.PoolContract,p=e.address,h=Object(i.useState)(!1),x=Object(s.a)(h,2),O=x[0],m=x[1],v=Object(i.useState)([]),k=Object(s.a)(v,2),w=k[0],N=k[1],C=Object(i.useState)(!1),E=Object(s.a)(C,2),T=E[0],F=E[1],A=Object(i.useState)(c.approve),D=Object(s.a)(A,2),q=D[0],R=D[1],H=(t=j,Object(i.useMemo)((function(){return function(){var e=Object(r.a)(Object(a.a)().mark((function e(n,c,r){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t[n].apply(t,Object(I.a)(c).concat([r])));case 1:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}()}),[t])),B=["#824A4A","#69985E","#93A1B8","#377DFF","#59AE99"],U=Object(i.useCallback)(Object(r.a)(Object(a.a)().mark((function e(){var t,n,c,r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=0;case 2:if(!(n<u.length)){e.next=13;break}return e.next=5,j.getApproved(u[n]);case 5:c=e.sent,console.log("getApproved",c),r={},r=c&&c.toLocaleLowerCase()===p.toLocaleLowerCase()?{id:u[n],isApproved:!0}:{id:u[n],isApproved:!1},t.push(r);case 10:n++,e.next=2;break;case 13:console.log(t),N(t);case 15:case"end":return e.stop()}}),e)}))),[u,j]),_=Object(i.useCallback)(function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){var n,c,r,s,i,o,l;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={text:"Approve",icon:"DERI"},c={success:"Approve ".concat(t),error:"Transaction failed"},t=+t,e.prev=3,r=[p,t],e.next=7,Object(b.t)(j,"approve",r);case 7:return s=e.sent,console.log(s),e.next=11,H("approve",r,{gasLimit:s});case 11:if(i=e.sent,console.log("approve",i),!i||!i.hash){e.next=17;break}L.a.emit(S.q,{title:n,content:c,hash:i.hash}),e.next=18;break;case 17:return e.abrupt("return",!1);case 18:return e.next=20,i.wait();case 20:if(o=e.sent,console.log("receipt",o),!o){e.next=33;break}if(console.log("receipt",o),!o||!o.transactionHash){e.next=33;break}if(l=o.transactionHash,!o.status){e.next=31;break}return L.a.emit(S.r,{title:n,content:c,context:{success:!0,hash:l,error:"error"}}),e.abrupt("return",!0);case 31:return L.a.emit(S.r,{title:n,content:c,context:{success:(!1).success,hash:l,error:"error"}}),e.abrupt("return",!1);case 33:e.next=39;break;case 35:return e.prev=35,e.t0=e.catch(3),console.error(e.t0),e.abrupt("return",!1);case 39:case"end":return e.stop()}}),e,null,[[3,35]])})));return function(t){return e.apply(this,arguments)}}(),[j]),M=Object(i.useCallback)(Object(r.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=w.find((function(e){return!e.isApproved})))){e.next=6;break}return e.next=4,_(t.id);case 4:e.sent,U();case 6:case"end":return e.stop()}}),e)}))),[w]),z=Object(i.useCallback)(Object(r.a)(Object(a.a)().mark((function e(){var t,r,s,i,u,d,j;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={text:c["add-liquidity-state"],icon:"DERI"},r={success:"".concat(o("add-baseToken-liquidity",{baseToken:"UNISWAP-LP"})),error:c["transaction-failed"]},e.prev=2,e.next=5,Object(b.t)(f,"deposit",[]);case 5:return s=e.sent,e.next=8,f["deposit()"]({gasLimit:s});case 8:if(i=e.sent,console.log("deposit",i),!i||!i.hash){e.next=14;break}L.a.emit(S.q,{title:t,content:r,hash:i.hash}),e.next=15;break;case 14:return e.abrupt("return",!1);case 15:return e.next=17,i.wait();case 17:if(u=e.sent,console.log("receipt",u),!u){e.next=32;break}if(console.log("receipt",u),!u||!u.transactionHash){e.next=32;break}if(d=u.transactionHash,j="add"===n?0:1,l&&l(j),!u.status){e.next=30;break}return L.a.emit(S.r,{title:t,content:r,context:{success:!0,hash:d,error:"error"}}),e.abrupt("return",!0);case 30:return L.a.emit(S.r,{title:t,content:r,context:{success:(!1).success,hash:d,error:"error"}}),e.abrupt("return",!1);case 32:e.next=38;break;case 34:return e.prev=34,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",!1);case 38:case"end":return e.stop()}}),e,null,[[2,34]])}))),[f,n]),X=Object(i.useCallback)(Object(r.a)(Object(a.a)().mark((function e(){var t,r,s,i,u,d,j;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={text:c["remove-liquidity-state"],icon:"DERI"},r={success:"".concat(o("remove-baseToken-liquidity",{baseToken:"UNISWAP-LP"})),error:c["transaction-failed"]},e.prev=2,e.next=5,Object(b.t)(f,"withdraw",[]);case 5:return s=e.sent,e.next=8,f["withdraw()"]({gasLimit:s});case 8:if(i=e.sent,console.log("withdraw",i),!i||!i.hash){e.next=14;break}L.a.emit(S.q,{title:t,content:r,hash:i.hash}),e.next=15;break;case 14:return e.abrupt("return",!1);case 15:return e.next=17,i.wait();case 17:if(u=e.sent,console.log("receipt",u),!u){e.next=32;break}if(console.log("receipt",u),d="add"===n?0:1,l&&l(d),!u||!u.transactionHash){e.next=32;break}if(j=u.transactionHash,!u.status){e.next=30;break}return L.a.emit(S.r,{title:t,content:r,context:{success:!0,hash:j,error:"error"}}),e.abrupt("return",!0);case 30:return L.a.emit(S.r,{title:t,content:r,context:{success:(!1).success,hash:j,error:"error"}}),e.abrupt("return",!1);case 32:e.next=38;break;case 34:return e.prev=34,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",!1);case 38:case"end":return e.stop()}}),e,null,[[2,34]])}))),[f,n]);return Object(i.useEffect)((function(){if(w.length){var e=w.find((function(e){return!e.isApproved}));if(e){var t="".concat(c.approve," ").concat(e.id);R(t)}else F(!0)}}),[w]),Object(i.useEffect)((function(){j&&u&&u.length&&"add"===n&&U()}),[u,j,n]),Object(i.useEffect)((function(){m(!u.length),F(!u.length),"remove"===n?(F(!0),d(1)):d(0)}),[u,n]),Object(P.jsxs)("div",{className:"operate-liquidity-lp operate-liquidity",children:[u&&u.length?Object(P.jsxs)("div",{className:"add-remove-nft-box",children:[Object(P.jsxs)("div",{className:"unstaked-nft",children:["Your ","add"===n?"unstaked":"staked"," DERI/ETH LP NFTs"]}),Object(P.jsx)("div",{className:"tokenIdList",children:u&&u.map((function(e,t){return Object(P.jsxs)("div",{className:"tokenId-box",children:[Object(P.jsx)("div",{className:"color-box",style:{backgroundColor:B[t]}}),Object(P.jsx)("div",{className:"tokenId-text",children:e})]},"index")}))})]}):Object(P.jsxs)("div",{className:"no-nft-box",children:[Object(P.jsx)("img",{src:g,alt:""}),Object(P.jsx)("div",{children:"add"===n?"No DERI-ETH LP NFT in your wallet":"No DERI-ETH LP NFT staked"})]}),Object(P.jsx)("div",{className:"add-remove-btn",children:T?Object(P.jsx)(y.a,{width:"331",fontSize:"18",disabled:O,label:"add"===n?"STAKE ALL LP NFTS":"UNSTAKE ALL LP NFTS",type:S.D,onClick:"add"===n?z:X}):Object(P.jsx)(y.a,{width:"331",fontSize:"18",disabled:O,label:q,type:S.D,onClick:M})})]})};t.default=Object(l.b)("wallet","poolManager")(Object(l.c)((function(e){var t=e.lang,n=e.wallet,l=void 0===n?{}:n,j=e.poolManager,h=e.getLang,g=Object(o.i)(),y=g.chainId,I=g.address,T=Object(i.useState)("show"),H=Object(s.a)(T,2),B=H[0],U=H[1],_=Object(u.c)(),M="UNISWAP-LP",z=Object(i.useState)(""),X=Object(s.a)(z,2),W=X[0],J=X[1],K=Object(i.useState)([]),$=Object(s.a)(K,2),V=$[0],Y=$[1],G=Object(i.useState)(""),Q=Object(s.a)(G,2),Z=Q[0],ee=Q[1],te=Object(i.useState)(0),ne=Object(s.a)(te,2),ce=ne[0],ae=ne[1],re=Object(p.a)(),se=Object(i.useState)(!1),ie=Object(s.a)(se,2),oe=ie[0],le=ie[1],ue=Object(i.useState)([]),de=Object(s.a)(ue,2),be=de[0],je=de[1],fe=Object(i.useState)([]),pe=Object(s.a)(fe,2),he=pe[0],xe=pe[1],Oe=Object(i.useState)([]),me=Object(s.a)(Oe,2),ve=me[0],ge=me[1],ke=Object(i.useState)([]),we=Object(s.a)(ke,2),Ne=we[0],ye=we[1],Se=Object(i.useState)(0),Ce=Object(s.a)(Se,2),Ee=Ce[0],Ie=Ce[1],Le=Object(i.useState)(0),Te=Object(s.a)(Le,2),Fe=Te[0],Pe=Te[1],Ae=Object(i.useState)(0),De=Object(s.a)(Ae,2),qe=De[0],Re=De[1],He=Object(i.useState)(0),Be=Object(s.a)(He,2),Ue=Be[0],_e=Be[1],Me=Object(i.useState)(),ze=Object(s.a)(Me,2),Xe=ze[0],We=ze[1],Je=A[y]&&A[y].name,Ke=Object(C.a)("ERC20",y,"0x21E60EE73F17AC0A411ae5D690f908c3ED66Fe12"),$e=Object(C.a)("ERC20",y,"0x82af49447d8a07e3bd95bd0d56f35241523fbab1"),Ve=Object(C.a)("IERC721",y),Ye=Object(C.a)("arbitrumLp",y),Ge=Object(C.a)("LpTokenId",y),Qe=Object(C.a)("PairAbi",y),Ze=Object(i.useRef)(),et=Object(i.useRef)(),tt=function(){var e=Object(r.a)(Object(a.a)().mark((function e(){var t,n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye["getRewardInfo(address)"](l.detail.account);case 2:(t=e.sent)&&(n=E.a.from(t._hex).toString()/Math.pow(10,18),ae(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=Object(i.useCallback)(function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,setTimeout(Object(r.a)(Object(a.a)().mark((function e(){var t,n,c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(b.x)(y),e.next=3,Ye.connect(t);case 3:return n=e.sent,c=he.map(function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){var c,r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={},e.next=3,n.getSecondsPerLiquidityInsideX128(t);case 3:return(r=e.sent)&&(c.id=t,c.timestamp=E.a.from(r.timestamp._hex).toString(),c.secondsPerLiquidityInsideX128=E.a.from(r.secondsPerLiquidityInsideX128._hex).toString()),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=7,Promise.all(c);case 7:c=e.sent,ye(c);case 9:case"end":return e.stop()}}),e)}))),1e3);case 2:return e.abrupt("return",undefined);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[he,Ye]),ct=Object(i.useCallback)(Object(r.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=he.map(function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){var n,c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,Ye.getSecondsPerLiquidityInsideX128(t);case 3:return(c=e.sent)&&(n.id=t,n.timestamp=E.a.from(c.timestamp._hex).toString(),n.secondsPerLiquidityInsideX128=E.a.from(c.secondsPerLiquidityInsideX128._hex).toString()),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:t=e.sent,nt(),ge(t);case 6:case"end":return e.stop()}}),e)}))),[he,Ye]),at=Object(i.useCallback)(Object(r.a)(Object(a.a)().mark((function e(){var t,n,c,i,o,l,u,d;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=he.map(function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){var n,c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,Ge.positions(t);case 3:return c=e.sent,n={tickLower:c.tickLower,tickUpper:c.tickUpper,liquidity:E.a.from(c.liquidity._hex).toString()},e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:return t=e.sent,e.next=6,Qe.slot0();case 6:return n=(n=e.sent).tick,c=t.map((function(e){var t=Object(b.p)(n,e.tickLower,e.tickUpper,e.liquidity),c=Object(s.a)(t,2),a=c[0],r=c[1];return{deri:a/Math.pow(10,18),eth:r/Math.pow(10,18)}})),i=c.reduce((function(e,t){return e+t.deri}),0),o=c.reduce((function(e,t){return e+t.eth}),0),"https://sig.oraclum.io/unsigned?symbols=ETHUSD",e.next=14,F.a.get("https://sig.oraclum.io/unsigned?symbols=ETHUSD");case 14:l=e.sent,u=l.data.ETHUSD,d=Object(b.a)(o).times(u).toNumber(),Pe(d),Re(i);case 19:case"end":return e.stop()}}),e)}))),[Ge,he,Qe]),rt=Object(i.useCallback)(Object(r.a)(Object(a.a)().mark((function e(){var t,n,c,r,s,i,o;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Ee&&qe&&Fe)){e.next=14;break}return t="".concat("https://infoapi.deri.io","/stats_for_token"),e.next=4,fetch(t);case 4:return n=e.sent,e.next=7,n.json();case 7:c=e.sent,r=c.data.price,s=Object(b.a)(qe).times(r).toNumber(),i=s+Fe,o=Object(b.a)(Ee).times(r).toNumber(),We(o/i*100);case 14:case"end":return e.stop()}}),e)}))),[Ee,qe,Fe]),st=Object(i.useCallback)(Object(r.a)(Object(a.a)().mark((function e(){var t,n,c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("bTimeRewardInfo aTimeRewardInfo",Ne,ve),t=Ne.map(function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){var n,c,r,s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ve.find((function(e){return e.id===t.id})),c=n.secondsPerLiquidityInsideX128,e.next=4,Ye.getRewardInBetween(t.id,t.timestamp,c,t.secondsPerLiquidityInsideX128);case 4:if(!(r=e.sent)){e.next=8;break}return s={reward:E.a.from(r._hex).toString()/Math.pow(10,18),id:t.id,timestamp:Math.abs(t.timestamp-n.timestamp)},e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.all(t);case 4:0!==(t=e.sent)[0].timestamp&&(n=t.reduce((function(e,t){return e+t.reward}),0),31536e6,c=n/(1e3*t[0].timestamp)*31536e6,Ie(c));case 6:case"end":return e.stop()}}),e)}))),[ve,Ne,Ye]),it=function(e){tt(),dt(),bt(),jt(),_e(e)},ot=Object(i.useMemo)((function(){var e;return e={},Object(c.a)(e,t.add,{content:Object(P.jsx)(R,{type:"add",getLang:h,setActiveIndex:_e,afterTransaction:it,wallet:l,alert:_,address:I,lang:t,NFTContract:Ve,PoolContract:Ye,tokenIdList:be}),style:{background:"linear-gradient(200.74deg, rgba(97, 122, 255, 0.1) -4.65%, rgba(223, 229, 255, 0) 50.94%, rgba(85, 91, 237, 0.05) 105.4%)"},borderColor:"#203B60",icon:"add-icon",iconWidth:"25",iconHeight:"25",inicon:"inactive-add",direction:"tab-left"}),Object(c.a)(e,t.remove,{content:Object(P.jsx)(R,{type:"remove",getLang:h,setActiveIndex:_e,afterTransaction:it,wallet:l,alert:_,address:I,lang:t,PoolContract:Ye,NFTContract:Ve,tokenIdList:he}),style:{background:"linear-gradient(200.74deg, rgba(97, 122, 255, 0.1) -4.65%, rgba(223, 229, 255, 0) 50.94%, rgba(85, 91, 237, 0.05) 105.4%)"},borderColor:"#203B60",icon:"remove-icon",iconWidth:"25",iconHeight:"25",iconMarginRight:"20",inicon:"inactive-remove",direction:"tab-right"}),e}),[t,l,h,it,_e,be,_,he,Ve,Ye,I]),lt=function(){var e=Object(r.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.loadDoubleMingingPool();case 2:t=(t=(t=j.lpPools).filter((function(e){return e.address===I})))[0],t.symbols.map((function(e){var t=[];return t.push(e.symbol),t})).join(","),J(t),Y(t.bTokens);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ut=function(){var e=Object(r.a)(Object(a.a)().mark((function e(){var n,c,r,s,i,o,l;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==+ce){e.next=3;break}return _.error(t["no-deri-to-claim-yet"]),e.abrupt("return");case 3:return le(!0),n={text:"Claim Deri",icon:"DERI"},c={success:t["claim-deri-reward"],error:t["transaction-failed"]},e.prev=6,r=[I],e.next=10,Object(b.t)(Ye,"claim",r);case 10:return s=e.sent,e.next=13,Ye.claim({gasLimit:s});case 13:if(i=e.sent,console.log("claim",i),!i||!i.hash){e.next=19;break}L.a.emit(S.q,{title:n,content:c,hash:i.hash}),e.next=22;break;case 19:return tt(),le(!1),e.abrupt("return",!1);case 22:return e.next=24,i.wait();case 24:o=e.sent,console.log("receipt",o),o&&(console.log("receipt",o),o&&o.transactionHash&&(l=o.transactionHash,o.status?(L.a.emit(S.r,{title:n,content:c,context:{success:!0,hash:l,error:"error"}}),i.success&&ae(0)):L.a.emit(S.r,{title:n,content:c,context:{success:(!1).success,hash:l,error:"error"}}))),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(6),console.error(e.t0);case 32:tt(),le(!1);case 34:case"end":return e.stop()}}),e,null,[[6,29]])})));return function(){return e.apply(this,arguments)}}(),dt=Object(i.useCallback)(Object(r.a)(Object(a.a)().mark((function e(){var t,n,c,r,s,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.detail.account){e.next=27;break}return e.next=3,Ve.balanceOf(l.detail.account);case 3:t=e.sent,t=E.a.from(t._hex).toString(),n=[],c=0;case 7:if(!(c<t)){e.next=16;break}return e.next=10,Ve.tokenOfOwnerByIndex(l.detail.account,c);case 10:r=e.sent,r=E.a.from(r._hex).toString(),n.push(r);case 13:c++,e.next=7;break;case 16:s=[],i=0;case 18:if(!(i<n.length)){e.next=26;break}return e.next=21,Ye.getPositionInfo(n[i]);case 21:e.sent[0].toLocaleLowerCase()===q.toLocaleLowerCase()&&s.push(n[i]);case 23:i++,e.next=18;break;case 26:je(s);case 27:case"end":return e.stop()}}),e)}))),[Ve,l.detail.account,Ye]),bt=Object(i.useCallback)(Object(r.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.detail.account){e.next=7;break}return e.next=3,Ye.getUserTokenIds(l.detail.account);case 3:t=(t=e.sent).map((function(e){return E.a.from(e._hex).toString()})),console.log("getStakedTokenIdList",t),xe(t);case 7:case"end":return e.stop()}}),e)}))),[Ye,l.detail.account]),jt=Object(i.useCallback)(Object(r.a)(Object(a.a)().mark((function e(){var t,n,c,r,s,i,o,l,u,d,j,f;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke.balanceOf(q);case 2:return t=e.sent,e.next=5,$e.balanceOf(q);case 5:return n=e.sent,c="".concat("https://infoapi.deri.io","/stats_for_token"),"https://sig.oraclum.io/unsigned?symbols=ETHUSD",e.next=10,F.a.get("https://sig.oraclum.io/unsigned?symbols=ETHUSD");case 10:return r=e.sent,s=r.data.ETHUSD,e.next=14,fetch(c);case 14:return i=e.sent,e.next=17,i.json();case 17:o=e.sent,l=o.data.price,u=E.a.from(t._hex).toString()/Math.pow(10,18),d=E.a.from(n._hex).toString()/Math.pow(10,18),j=Object(b.a)(u).times(l).toNumber(),f=Object(b.a)(d).times(s).toNumber(),ee(j+f);case 25:case"end":return e.stop()}}),e)}))),[Ke,$e]);return Object(i.useEffect)((function(){if(l.detail.chainId&&l.detail.chainId!==y&&l.switchNetwork(re[y]),l.isConnected()&&Ye){var e=window.setInterval(tt,3e4);return tt(),function(){return clearInterval(e)}}}),[l.detail.chainId,l.detail.account,Ye]),Object(i.useEffect)((function(){he.length&&Ye&&ct()}),[he,Ye,l]),Object(i.useEffect)((function(){he.length&&Ge&&Qe&&at()}),[Ge,he,Qe,l]),Object(i.useEffect)((function(){Ee&&qe&&Fe&&rt()}),[Ee,qe,Fe]),Object(i.useEffect)((function(){ve.length&&Ye&&Ne.length&&st()}),[ve,Ne,Ye]),Object(i.useEffect)((function(){lt()}),[]),Object(i.useEffect)((function(){l.isConnected()||!Z||he||We(12.43)}),[Z,l&&he]),Object(i.useEffect)((function(){Ye&&!et.current&&l.detail.account&&(bt(),et.current=!0)}),[Ye,l.detail.account]),Object(i.useEffect)((function(){Ve&&l.detail.account&&Ye&&!Ze.current&&(dt(),et.current=!0)}),[Ve,l.detail.account,Ye]),Object(i.useEffect)((function(){Ke&&$e&&jt()}),[Ke,$e]),Object(P.jsxs)("div",{className:"pool-detail",children:[Object(P.jsx)("div",{className:"back-pool",children:Object(P.jsxs)("div",{className:"icon-back",onClick:function(){window.history.back(-1)},children:[Object(P.jsx)("img",{alt:"",src:x.default}),Object(P.jsx)("span",{children:t.back})]})}),Object(P.jsxs)("div",{className:"pool-deatail-info",children:[Object(P.jsxs)("div",{className:"pool-detail-basetoken-info",children:[Object(P.jsxs)("div",{className:"pool-info-text",children:[Object(P.jsxs)("div",{className:"pool-network-type",children:[Object(P.jsx)("div",{className:"network-logo",children:Object(P.jsx)("img",{alt:"",src:O.default})}),Object(P.jsxs)("div",{className:"pool-type-network-text",children:[Object(P.jsxs)("div",{className:"pool-type-text",children:[t[W.type]," ",t[W.zone]]}),Object(P.jsx)("div",{className:"pool-network-text",children:Je})]})]}),Object(P.jsxs)("div",{className:"pool-des",children:["Stake Uniswap ",Object(P.jsx)("a",{rel:"norelerror",target:"_blank",href:"https://app.uniswap.org/#/add/ETH/0x21E60EE73F17AC0A411ae5D690f908c3ED66Fe12/3000",children:"DERI-ETH "})," LP NFTs to earn $DERI rewards.",Object(P.jsx)("br",{}),Object(P.jsx)("a",{rel:"norelerror",target:"_blank",href:"https://docs.deri.io/library/faqs/mining-faq#is-dex-liquidity-mining-on-sushiswap-sushiswap-onsen-and-pancakeswap-deri-risk-free",children:Object(P.jsxs)("span",{className:"learn-more",children:[" ",t["learn-more"]]})})]})]}),Object(P.jsxs)("div",{className:"select-basetoken-info",children:[Object(P.jsxs)("div",{className:"select-coin-title-search",children:[Object(P.jsxs)("div",{className:"select-coin-title",children:[" ",t["select-the-coin"]]}),Object(P.jsx)("div",{className:"search-box",children:Object(P.jsx)(N.a,{list:V,searchName:"bTokenSymbol",onChange:function(){}})})]}),Object(P.jsxs)("div",{className:"coin-search",children:[Object(P.jsx)("div",{className:"slide-icon left",children:Object(P.jsx)(w.a,{token:"arrow-left",width:"24",height:"24"})}),Object(P.jsx)("div",{className:"coin-list",children:V.length?Object(P.jsx)(P.Fragment,{children:Object(P.jsx)("div",{className:"coin-box checked-base",children:Object(P.jsxs)("div",{className:"base-apy-info",children:[Object(P.jsxs)("div",{className:"lp-btoken-logo",children:[Object(P.jsx)("div",{className:"btoken-logo ".concat(V[0].bTokenSymbol)}),Object(P.jsx)("span",{className:"conect-logo",children:"+"}),Object(P.jsx)("div",{className:"btoken-logo ".concat(V[1].bTokenSymbol)})]}),Object(P.jsxs)("div",{className:"apy-base-staked",children:[Object(P.jsx)("div",{className:"base-name",children:M}),Object(P.jsxs)("div",{className:"base-apy",children:[t.apy," \xa0 ",Object(P.jsx)(v.a,{value:Xe,suffix:"%",decimalScale:2})]})]})]})})}):null}),Object(P.jsx)("div",{className:"slide-icon right",children:Object(P.jsx)(w.a,{token:"arrow-right",width:"24",height:"24"})})]})]})]}),Object(P.jsxs)("div",{className:"pool-detail-add-remove-info",children:[Object(P.jsxs)("div",{className:"mining-deri-liquidity",children:[Object(P.jsx)("div",{className:"btoken-liquidity",children:V.length&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)("div",{className:"lp-btoken-logo",children:[Object(P.jsx)("div",{className:"btoken-logo ".concat(V[0].bTokenSymbol)}),Object(P.jsx)("span",{className:"conect-logo",children:"+"}),Object(P.jsx)("div",{className:"btoken-logo ".concat(V[1].bTokenSymbol)})]}),Object(P.jsx)("div",{className:"manage-stake",children:Object(P.jsxs)("div",{className:"manage",children:[t.manage," ",M," ",t.liquidity]})})]})}),Object(P.jsx)("div",{className:"deri-current-epoch",children:Object(P.jsx)("div",{className:"mining-pool-claim",children:Object(P.jsxs)("div",{className:"mining-claim-info",children:[Object(P.jsxs)("span",{children:[" ",t["you-have"]]}),Object(P.jsxs)("span",{className:"".concat(0===+ce?"no-deri":""," mining-pool-num"),onClick:ut,children:[oe&&Object(P.jsx)(k.a,{}),Object(P.jsx)(v.a,{firstTime:!1,value:ce,decimalScale:2}),Object(P.jsx)("img",{src:m.a,alt:"deri"})]}),Object(P.jsx)("span",{children:t["claim-in-pool"]})]})})})]}),Object(P.jsxs)("div",{className:"mining-add-remove-liquidity",children:[Object(P.jsxs)("div",{className:"pool-info",children:[Object(P.jsxs)("div",{className:"pool-info-title",children:[Object(P.jsx)("div",{className:"pool-info-title-text",children:t["pool-info"]}),Object(P.jsxs)("div",{className:"down-up",children:["show"===B&&Object(P.jsx)("span",{onClick:function(){return U("hide")},children:Object(P.jsx)("img",{className:"up-icon",alt:"",src:f.default})}),"hide"===B&&Object(P.jsx)("span",{onClick:function(){return U("show")},children:Object(P.jsx)("img",{alt:"",src:f.default})})]})]}),Object(P.jsxs)("div",{className:"'pool-info-text' ".concat(B),children:[Object(P.jsxs)("div",{className:"pool-info-text-one",children:[Object(P.jsxs)("div",{className:"info-box",children:[Object(P.jsx)("div",{className:"info-box-title",children:t.apy}),Object(P.jsx)("div",{className:"info-box-num",children:Object(P.jsx)(v.a,{value:Xe,suffix:"%",decimalScale:2})})]}),Object(P.jsxs)("div",{className:"info-box",children:[Object(P.jsx)("div",{className:"info-box-title",children:t["pool-liquidity"]}),Object(P.jsxs)("div",{className:"info-box-num",children:["$ ",Object(P.jsx)(v.a,{value:Z,displayType:"text",decimalScale:0,thousandSeparator:!0})]})]}),Object(P.jsxs)("div",{className:"info-box",children:[Object(P.jsx)("div",{className:"info-box-title",children:t["staked-balance"]}),Object(P.jsxs)("div",{className:"info-box-num",children:[he.length," ",Object(P.jsx)("a",{href:"https://arbiscan.io/address/0xC36442b4a4522E871399CD717aBDD847Ab11FE88",children:"DERI/ETH LP NFTs"})]})]})]}),Object(P.jsx)("div",{className:"pool-info-text-two",children:Object(P.jsxs)("div",{className:"info-box",children:[Object(P.jsx)("div",{className:"info-box-title",children:t["contract-address"]}),Object(P.jsx)("div",{className:"info-box-num",children:Object(P.jsx)("a",{target:"_blank",rel:"noreferrer",href:"".concat(D[y]&&D[y].viewUrl,"/address/").concat(I),children:Object(b.m)(I)})})]})})]})]}),Object(P.jsx)("div",{className:"add-remove-liquidity",children:Object(P.jsx)(d.a,{tabSet:ot,iconMarginRight:"20",width:379,size:18,inactiveBgColor:"#0c192d",icon:"",borderBottom:!0,divider:!0,activeIndex:Ue})})]})]})]})]})})))}}]);
//# sourceMappingURL=22.31ca14c7.chunk.js.map